                                                      CARTAN DETERMINANTS AND SHAPOVALOV FORMS
arXiv:math/0111306v1 [math.RT] 29 Nov 2001




                                                                JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV


                                                     Abstract. We compute the determinant of the Gram matrix of the Shapovalov form
                                                     on weight spaces of the basic representation of an affine Kac-Moody algebra of ADE type
                                                     (possibly twisted). As a consequence, we obtain explicit formulae for the determinants
                                                     of the Cartan matrices of p-blocks of the symmetric group and its double cover, and of
                                                     the associated Hecke algebras at roots of unity.




                                                                                        1. Introduction
                                                                                                         (r)
                                               Let g be an affine Kac-Moody algebra of type XN as in the table:
                                                             (r)    (1)        (1)     (1)       (2)      (2)        (2)       (2)    (3)
                                                           XN      Aℓ        Dℓ      Eℓ        A2ℓ−1    A2ℓ       Dℓ+1        E6     D4
                                                           ℓ       ≥1        ≥4      6, 7 or 8 ≥ 3      ≥1        ≥2          4      2
                                                           k       0         0       0         ℓ−1      ℓ         1           2      1
                                                           α       ℓ+1       4       9−ℓ       2        1         2           1      1
                                                           β       1         1       1         ℓ        2ℓ + 1    2           3      2

                                             We are interested here in the basic representation V = V (Λ0 ) of g, see [11]. Let |0i be a
                                             vacuum vector and define the lattice VZ := UZ |0i in V , where UZ is the Z-subalgebra of
                                             the universal enveloping algebra of g generated by the divided powers
                                                                          eni /n!,   fin /n!   (i = 0, 1, . . . , ℓ, n ≥ 1)
                                             in the Chevalley generators. Let (. , .)S denote the Shapovalov form, the unique Hermitian
                                             form on V satisfying (|0i, |0i)S = 1 and (ei v, v ′ )S = (v, fi v ′ )S for i = 0, . . . , ℓ and all
                                             v, v ′ ∈ V . Its restriction to VZ gives a symmetric bilinear form
                                                                                      (. , .)S : VZ × VZ → Z.
                                             Our Main Theorem gives an explicit formula for the determinant of the Gram matrix of
                                             this form on each weight space of VZ .
                                                To state the result precisely, recall the description of the weights of V [11, §12.6]: every
                                             weight is of the form wΛ0 − dδ for some w in the Weyl group W associated to g and some
                                             integer d ≥ 0. Also let P(d) denote the set of all partitions λ = (λ1 ≥ λ2 ≥ . . . ) of d.
                                             Given λ ∈ P(d), we can gather together its equal parts to represent it as λ = (1r1 2r2 . . . ).
                                                                                                                   (r)
                                             Also recall the number r ∈ {1, 2, 3} which comes from the type XN . Then:
                                             Main Theorem. The determinant of the Gram matrix P        of the Shapovalov form
                                                                                                                          P on the
                                             (wΛ0 − dδ)-weight space of VZ is αa(d) β b(d) where a(d) = λ∈P(d) aλ , b(d) = λ∈P(d) bλ
                                               Second author partially supported by the NSF (grant no. DMS-9900134).


                                                                                                 1
2                     JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

and for λ = (1r1 2r2 . . . ),
                         Y                      Y  k + ri − 1       X ri
                                 ℓ + ri − 1
              aλ =                           ·                     ·              ,
                                     ri                   ri                    ℓ
                      i with r|i               i with r∤i            i with r|i
                         Y ℓ + ri − 1           Y  k + ri − 1       X ri
                 bλ =                        ·                     ·              ,
                                     ri                   ri                    k
                      i with r|i               i with r∤i            i with r∤i
                                                                                P
ℓ, k, α, β being as in the above table. The generating functions a(q) = d≥0 a(d)q d and
         P
b(q) = d≥0 b(d)q d are given by the formulae
                                a(q) = T (q r )P (q)k P (q r )ℓ−k ,
                                b(q) = (T (q) − T (q r ))P (q)k P (q r )ℓ−k
                Q    1
where P (q) = i≥1 1−q  i is the generating function for the number of partitions of d and
       P     qi
T (q) = i≥1 1−qi is the generating function for the number of divisors of d.
   In [5], De Concini, Kac and Kazhdan constructed the basic representation over Z (at
least in the untwisted cases) using an integral version of the vertex operator construction
of [8]. They showed in particular that the basic representation remains irreducible on
reduction modulo p if and only if p ∤ det XN , where XN is the Cartan matrix of the
underlying finite root system; this also follows immediately from our Main Theorem on
noting that det XN = αβ r−1 .
   Our interest in the theorem comes instead from modular representation theory. Suppose
                         (1)
now that g is of type Aℓ and set p = (ℓ + 1). Let F Sn denote the group algebra of the
symmetric group over a field F of characteristic p (assuming in this case that p is prime),
and let Hn denote the Iwahori-Hecke algebra associated to Sn over an arbitrary field but at
a primitive pth root of 1 (this case making sense for arbitrary p ≥ 2). By [1, 9], there
                                                                                    L is an
isomorphism between the basic representation VZ of g and the direct sum K = n≥0 Kn
of the Grothendieck groups Kn of finitely generated projective F Sn - (resp. Hn -) modules
for all n. Under the isomorphism, the weight spaces of VZ are in 1–1 correspondence with
the block components of K, a weight space of the form wΛ − dδ corresponding to a block
of p-weight d (see e.g. [13, §5.3] for the definition of the p-weight of a block). Moreover,
according to [9, Theorem 14.2], the Shapovalov form corresponds to the usual Cartan
pairing ([P ], [Q]) = dim Hom(P, Q) between projective modules P, Q. Thus the theorem
has the following immediate corollary:
Corollary 1. Let B be a block of p-weight d of either the group algebra F Sn of the
symmetric group over a field of prime characteristic p, or the Hecke algebra Hn over an
arbitrary field but at a primitive pth root of unity, in which case p ≥ 2 is an arbitrary
integer. Then the determinant of the Cartan matrix of B is pN (d) where
                            X                                                   
                                          r1 + r2 + . . . p − 2 + r1    p − 2 + r2
           N (d) =                                                                   ....
                        r   r
                                              p − 1           r1            r2
                    λ=(1 1 2 2 ... )∈P(d)
                                       P
The generating function N (q) = d≥0 N (d)q d equals T (q)P (q)p−1 .
                                     CARTAN DETERMINANTS                                            3

   It is a classical result of Brauer that the determinant of the Cartan matrix of a block of
F Sn is a power of p (see [6, 84.17]). Donkin [7] has proved similarly that the determinant of
the Cartan matrix of a block of Hn divides a power of p. The corollary shows in particular
that the determinant is exactly a power of p, even in those cases where p is not prime, as
had been conjectured by Mathas. We remark that in the case of blocks of F Sn , but not of
Hn , the explicit generating function given in the corollary has also recently been obtained
by Bessenrodt and Olsson [2] using methods from block theory.
                                           (2)
   Finally suppose that g is of type A2ℓ and set p = (2ℓ + 1). In this case, the Main
Theorem can be reinterpreted as a computation of Cartan determinants of the p-blocks
of the double covers Sbn of the symmetric group. Following [3, §9-c] for notation, let S(n)
be the twisted group algebra of Sn over an algebraically closed field F of characteristic p
(assuming p is an odd prime in this case), and let W (n) be the Hecke-Clifford superalgebra
over an algebraically closed field of characteristic different from 2 at a primitive pth root
of unity (for arbitrary odd p ≥ 3). By [3, 7.16, 8.13, 9.9],
                                                        L there is an isomorphism between
the basic representation VZ and the direct sum K = n≥0 Kn of the Grothendieck groups
of finitely generated projective S(n)- (resp. W (n)-) supermodules, under which a weight
space of the form wΛ − dδ maps to a superblock of p-bar weight d (see [3, §9-a] for the
definition of p-bar weight of a superblock), and the Shapovalov form corresponds to the
Cartan pairing on projective supermodules (see [3, §7-c]). So:
Corollary 2. Let B be a superblock of p-bar weight d of either S(n) in odd characteristic
p, or W (n) at a primitive pth root of unity, in which case p ≥ 3 is an arbitrary odd integer.
Then the determinant of the Cartan matrix of B is pN (d) where
                 X                                            p−3       p−3       
                            2r1 + 2r3 + 2r5 + . . . p−3
                                                     2   + r1     2  + r2      2  + r3
  N (d) =                                                                                ....
               r r
                                    p−1                 r1          r2           r3
          λ=(1   1 2 2 ... )∈P(d)
                                     P                d
The generating function N (q) =          d≥0 N (d)q       equals (T (q) − T (q 2 ))P (q)(p−1)/2 .
   It is more natural from the point of view of finite group theory to ask for the Cartan
determinant of a block B of the twisted group algebra S(n) in the usual ungraded sense.
According to Humphreys’ classification [10], see also [3, 9.16], we can associated to B its
p-bar weight d and a type ε ∈ {M, Q}. In case ε = M, B coincides with a superblock of
p-bar weight d and it is immediate that its Cartan determinant is as in Corollary 2. But
in the cases when ε = Q and d > 0, the Cartan matrix of B has twice as many rows and
columns as the Cartan matrix of the corresponding superblock. Nevertheless, we believe
the Cartan determinant is the same, based on explicit computations for small d. In other
words, we conjecture that Cartan determinants of p-blocks of S(n) depend only on the
p-bar weight d, not on the type ε, of the block.

                                    2. The affine algebras
   We begin by recalling the construction of the affine Lie algebras from [11, Chapter 8].
       (r)
Let XN be an affine Dynkin diagram of ADE type as in the introduction, and let XN be
the underlying finite Dynkin diagram. We use the same numbering of Dynkin diagrams
                                                (r)     (2)
as [11, §4.8] with two exceptions: in the case XN = E6 we will number the vertices of
4                    JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

the finite Dynkin diagram XN = E6 by
                                               1   2       3         5   6
                                               ❝   ❝       ❝         ❝    ❝
                                                           ❝
                                                           4

                    (r)       (2)
and in the case XN = A2ℓ we will number the vertices of the finite Dynkin diagram
XN = A2ℓ by
                                    ℓ−1 ℓ−2            0       ℓ+1       2ℓ−1 2ℓ
                                     ❝         ❝       ❝        ❝            ❝   ❝

   Let Q′ denote the root lattice of type XN , with simple roots α′i and invariant bilinear
form (.|.)′ normalized so that each (α′i |α′i )′ = 2. Let µ : Q′ → Q′ be a graph automorphism
of order r, as in e.g. [11, §7.9]. Let
                                             ε : Q′ × Q′ → {±1}
be an asymmetry function as in [11, §7.8] chosen so that ε(µ(α′ ), µ(β ′ )) = ε(α′ , β ′ ). In case
   (r)    (2)
XN = A2ℓ this is not possible so we instead require here that ε(µ(α′ ), µ(β ′ )) = ε(β ′ , α′ ).
Let h′ = C ⊗Z Q′ viewed as an abelian Lie algebra, and extend µ and (.|.)′ linearly to
h′ . Then we can construct the finite dimensional simple Lie algebra g′ of type XN as the
vector space                                 M
                                  g′ = h′ ⊕        CEα′
                                                       α′ a root
viewed as a Lie algebra so that     h′       is abelian and
                     [α , Eβ ′ ] = (α |β ′ )′ Eβ ′ ,
                          ′              ′
                                                        [Eα′ , E−α′ ] = −α′ ,
                                    
                                      ε(α′ , β ′ )Eα′ +β ′ if α′ + β ′ is a root,
                    [Eα′ , Eβ ′ ] =
                                      0                    otherwise.
The invariant form on h′ extends to g′ by (h′ |Eα′ )′ = 0 and (Eα′ |Eβ ′ )′ = −δα′ ,−β ′ for all
roots α′ , β ′ .
                                                                                  (r)
   Let ai , a∨i (i = 0, . . . , ℓ) be the numerical labels on the Dynkin diagram XN and its dual
                                                              (r)    (2)              (r)    (2)
as in [11, §4.8]. We note especially that a0 = 1 if XN 6= A2ℓ and a0 = 2 if XN = A2ℓ .
It will also be convenient to define
                                                 (r)     (2)
                                    ci = 2 if XN = A2ℓ and i = 0,
                                           1 otherwise;
                                          −1
                              di = ci a∨
                                       i ai ∈ {1, r}
for i = 0, 1, . . . , ℓ. Let m = a0 r and fix a primitive mth root of unity ω ∈ C. In all types
                 (2)
other than A2ℓ , let η : Q′ → C× denote the constant function with η(α′ ) = 1 for all
                         (2)
α′ ∈ Q′ ; in type A2ℓ , define η instead by the rules
                                                                          
                             ′ ′       ′     ′     (α′ |β ′ )′      ′       1 j 6= 0, ℓ + 1,
      η(0) = 1, η(α + β ) = η(α )η(β )(−1)                     , η(αj ) =
                                                                            ω j = 0, ℓ + 1.
Now extend µ from h′ to g′ by declaring that µ(Eα′ ) = η(α′ )Eµ(α′ ) for all roots α′ ∈ Q′ .
The order of the resulting automorphism µ of g′ is equal to m in all cases.
                                          CARTAN DETERMINANTS                                    5

   Decompose
                            M
                    g′ =           g′n     where        g′n = {X ∈ g′ | µ(X) = ω n X}.
                           n∈Z/m

Also write h′n = h′ ∩ g′n . Introduce the infinite dimensional Lie algebras
                       M
                  g=         g′n ⊗ tn ⊕ Cc ⊕ Cd ⊆ g′ ⊗ C[t, t−1 ] ⊕ Cc ⊕ Cd,
                            n∈Z
                      h = h′0 ⊗ 1 ⊕ Cc ⊕ Cd ⊂ g,
                                                                     M
                       t = t+ ⊕ Cc ⊕ t− ⊂ g          where t± =             h′n ⊗ tn .
                                                                    ±n>0
Multiplication is defined by the rules
                        [d, X ⊗ tn ] = nX ⊗ tn ,           [c, g] = 0,
                                                                             (X|Y )′
                        [X ⊗ tn , Y ⊗ tk ] = [X, Y ] ⊗ tn+k + δn,−k n                c.
                                                                               m
                                                     (r)
Then g is the affine Lie algebra of type XN with canonical central element c and scaling
element d, and h is a Cartan subalgebra. As a matter of notation, we will write
                                           m−1
                                           X
                                 X(n) :=          ω −nj µj (X) ⊗ tn ∈ g′n ⊗ tn
                                            j=0

for X ∈ g′ and n ∈ Z. The normalized invariant form on g will be denoted (.|.), and is
defined by
                            (X ⊗ tn |Y ⊗ tk ) = δn,−k (X|Y )′ /r
for all X ∈ gn , Y ∈ gk .
   In order to write down a choice of Chevalley generators for g, let ℓ denote the number
of µ-orbits on the simple roots in Q′ . Let
                                    (
                                               (r)     (2)
                                        0 if XN 6= A2ℓ ,
                                 ε=            (r)     (2)
                                        ℓ if XN = A2ℓ ,
and set
                                       I = {0, 1, . . . , ℓ} − {ε}.
Then, the    α′i   for i ∈ I give a set of representatives for the µ-orbits on the simple roots.
Define
                    
                                                                                     (r)   (2)
                    
                     the longest root in Q′                       if    r = 1 or XN = A2ℓ ,
                    
                    
                    
                       ′             ′                                    (r)    (2)
                     α1 + · · · + α2ℓ−2                           if    XN = A2ℓ−1 ,
             −α′ε =   α′1 + · · · + α′ℓ                            if
                                                                           (r)    (2)
                                                                         XN = Dℓ+1 ,
                    
                    
                    
                     α′2 + α′3 + α′4                              if
                                                                           (r)
                                                                         XN = D4 ,
                                                                                  (3)
                    
                    
                     ′                                                    (r)    (2)
                      α1 + 2α′2 + 2α′3 + α′4 + α′5 + α′6           if    XN = E6 .
For i = 0, 1, . . . , ℓ, write
                                    √                                    √
                                       ci                                  ci
                        ei (n) =          E ′ (n)   and fi (n) = −            E ′ (n).
                                    a0 di αi                             a0 di −αi
6                    JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

The Chevalley generators of g are e0 = e0 (1), ei = ei (0) and f0 = f0 (−1), fi = fi (0) for
i = 1, . . . , ℓ, as is proved in [11, §8.7] (taking s0 = 1, s1 = · · · = sℓ = 0). We also define
                                                                ci ′
                                    hi = [ei , fi ] = δi,0 c +      α (0).
                                                               a0 di i
   Next let Q ⊂ h∗ denote the root lattice associated to g. So following [11, §6.2],
                                                  ℓ
                                                  M
                                         Q=             Zαi ⊕ ZΛ0
                                                  i=0
where α0 , . . . , αℓ are the simple roots corresponding to h0 , . . . , hℓ and Λ0 is the zeroth
fundamental dominant weight, i.e.
                                                                               (r)
                 hhi , αj i = the ij-entry of the Cartan matrix of type XN ,
                 hhi , Λ0 i = hd, αi i = δi,0 ,
                  hd, Λ0 i = 0,
for i, j = 0, . . . , ℓ. Also as in [11, §6.2], we have the normalized invariant form (.|.) on h∗
                           P
and the element δ = ℓi=0 ai αi ∈ Q.
   To conclude, we explain the relationship between the form (.|.)′ on Q′ and the form (.|.)
on Q. Introduce the new symmetric bilinear form (.|.)µ on Q′ defined by
                                                           r−1
                                                           X
                                     (α′ |β ′ )µ = (α′ |         µj (β ′ ))′
                                                           j=0

for all α′ , β ′ ∈ Q′ . There is an orthogonal decomposition
                                              ◦
                                        h∗ =h∗ ⊕ (Cδ + CΛ0 )
       ◦      Lℓ                                                                     ◦
where h ∗ =      i=1 Cαi ,   see [11, §6.2]. As in loc. cit. we write − : h∗ →h ∗ for the
                                                                                              ◦
orthogonal projection, in particular Q denotes the orthogonal projection of Q onto h ∗ .
Define a Z-linear map
                                                  ι : Q′ → Q                               (2.1)
by ι(µj (α′i )) = αi for each i ∈ I and j ≥ 0. The kernel of ι is the space
                                    M ′ = {α′ − µ(α′ ) | α′ ∈ Q′ }                         (2.2)
which is precisely the radical of the bilinear form (.|.)µ . Moreover, ι induces an isometry
between Q′ /M ′ and Q with respect to the forms induced by (.|.)µ and (.|.) respectively.

                                  3. The basic representation
  Next we recall the construction of the basic representation V = V (Λ0 ) of g, following
Lepowsky [12]. Let Z = h−1, ωi ⊂ C× be the multiplicative group generated by −1 and
ω. Form the central extension
                                          b −→π
                              1 −→ Z −→ Q        Q′ −→ 1,
                                            CARTAN DETERMINANTS                                                           7

        b = {eα′ | α′ ∈ Q′ , x ∈ Z} with multiplication
namely, Q     x
                         ′ ′
                         eα +β ′ ′                         (r)    (2)   (3)
               α′ β ′         xyε(α ,β )                if XN = 6 A2ℓ , D4 ,
              ex ey =          ′   ′                        (r)    (2)      (3)
                         eα +β ′ ′            ′    ′ ′ if XN = A2ℓ or D4 ,
                              xyε(α ,β )(−ω)−(α |µ(β ))

for α′ , β ′ ∈ Q′ , x, y ∈ Z. The map π : Q b → Q′ here is defined by π(eα′ ) = α′ . Let
                                                                             x
c = π −1 (M ′ ), where M ′ is as in (2.2). There is a well-defined multiplicative character
M
τ :Mc → C× defined in [12, Proposition 6.1] by
                     ′        ′                      ′   ′ ′                                         2   ′   ′
              τ (eαx −µ(α ) ) = (−1)(α |α ) /2 xη(α′ )ε(α′ , µ(α′ ))ω −a0 (α |α )µ /2 .
                               b
So we can form the induced Q-module       C[Q]b ⊗ c τ. We note the useful formula
                                                  C[M]
                         ′                                   ′   ′   µ(α′ )
                     eα1 ⊗ τ = η(α′ )ω a0 (α |α )µ /2 e1                        ⊗τ       (α′ ∈ Q′ ).
   View the symmetric algebra S(t− ) as a t-module in the unique way so that c acts as 1,
elements of t− act by multiplication, and elements of t+ annihilate 1. It is Z-graded by
declaring that
                                                   n
                                   deg(h ⊗ t−n ) =
                                                   a0
for each h ∈ h′−n , n ≥ 1. Let
                                                         b ⊗ c τ.
                                          V = S(t− ) ⊗ C[Q] C[M]
                                                b ⊗ c τ , let h ⊗ t0 for h ∈ h′ act by
Let t act on S(t− ) as given and trivially on C[Q] C[M]                       0
                                                         ′                               ′
                             (h ⊗ t0 )(f ⊗ eαx ⊗ τ ) = (h|α′ )′ f ⊗ eαx ⊗ τ,
and let d act by
                            ′                                          ′
                   d(f ⊗ eαx ⊗ τ ) = −a0 deg(f ) + (α′ |α′ )µ /2 f ⊗ eαx ⊗ τ.
We have now defined the action of h + t on V . To extend the action to all of g, let α′ ∈ Q′
be a root. As in [12, (4.8)], let
                       
                       
                         1                      r = 1,
                        √2(α′ |µ(α′ ))′
                                                    (r)  (2)     (2)     (2)
                                                 if XN = A2ℓ−1 , Dℓ+1 or E6 ,
             σ(α′ ) =                    ′   ′ ′     (r)  (3)
                       
                       
                         (1 − ω −1 )(α |µ(α )) if XN = D4 ,
                                     ′    ′ ′       (r)  (2)
                          2(1 + ω)(α |µ(α ))     if XN = A2ℓ .
Also define
                                                                                                                  
                                 X α′ (−n)z n                                                        X α′ (n)z n
          Pα′ (z) = exp                                 ,          Qα′ (z) = exp −                                ,
                                            n                                                                    n
                              n≥1                                                                    n≥1

viewed as elements of End(V            )[[z ±1 ]].       Let
                                                                            ′        ′       ′   ′
                    Eα′ (z) = σ(α′ )Pα′ (z)Qα′ (z −1 )eα1 z a0 α z a0 (α |α )µ /2−1 .
          ′
Here, z a0 α denotes the operator with
                                   ′             ′                      ′       ′        ′
                             z a0 α (f ⊗ eβx ⊗ τ ) = z (a0 α |β )µ f ⊗ eβx ⊗ τ
8                    JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

for each f ∈ S(t− ) and β ∈ Q′ , and
                               ′         ′                 ′   ′
                             eα1 (f ⊗ eβx ⊗ τ ) = f ⊗ (eα1 eβx ) ⊗ τ.
Expanding Eα′ (z) in powers of z we get the required action of Eα′ (n) ∈ g on V for each
root α′ ∈ Q′ and each n ∈ Z:
                                        X
                              Eα′ (z) =    Eα′ (n)z −n−1 .
                                             n∈Z
For a proof that this is a well-defined irreducible representation of g in case r = 1 see [11,
§14.8]; the general case is due to Lepowsky [12].
   Let C[Q] denote the group algebra of Q, with natural basis eα for α ∈ Q and multipli-
cation eα eβ = eα+β . Note C[Q] b ⊗ c τ has a basis given by the elements eα′ ⊗ τ for all
                                     C[M]                                        1
     P
α′ ∈ i∈I Zα′i . For such an α′ , let
                                    ′                           (r)   (2)   (3)
                             
                             
                                eι(α )                      if XN 6= A2ℓ , D4 ,
                                          ′    ′ ′        ′      (r)   (3)
                    ′
               ι(eα1 ⊗ τ ) =     (−ω)(α |µ(α )) /2 eι(α ) if XN = D4 ,
                             
                                         ′    ′
                                          (α |µ(α ))′
                              1−ω  √
                                                          ′      (r)
                                                      eι(α ) if X = A ,
                                                                       (2)
                                     2                             N    2ℓ

recalling the map ι : Q′ → Q defined in (2.1). Extending linearly, we obtain a vector space
                   b
isomorphism ι : C[Q]⊗                                                                ±
                          c] τ → C[Q]. For i = 0, 1, . . . , ℓ, we define functions σi : Q → C
                                                                                               ×
                        C[M
by the equation
                                          √
                           ±     α±αi       ci             ±α′
                          σi (α)e     =±        σ(α′i )ι(e1 i ι−1 (eα ))
                                          a0 di
for all α ∈ Q. The choice of the renormalization map ι above ensures:

Lemma 3.1. For all i = 0, 1, . . . , ℓ and α ∈ Q, σi± (α) ∈ {±1}. Moreover, for i ∈ I,
we have that σi− = −σi+ , and σi+ : Q → {±1} is a group homomorphism such that
σi+ (αj ) = ε(α′i , α′j ) for each j ∈ I.

  Now we can rewrite the construction of the basic representation V in terms of the
Chevalley generators. We will identify
                      V = S(t− ) ⊗ C[Q]b ⊗ c τ = S(t− ) ⊗ C[Q]
                                          C[M]
via the map id ⊗ι. Then, the actions of hi for i = 0, . . . , ℓ and of d are as
                        hi (f ⊗ eα ) = (δi,0 + hhi , αi)f ⊗ eα ,
                         d(f ⊗ eα ) = −a0 (deg(f ) + (α|α)/2) f ⊗ eα
for all α ∈ Q. In particular, we note from this that
                        wt(f ⊗ eα ) = Λ0 + α − (deg(f ) + (α|α)/2) δ                      (3.2)
for each homogeneous f ∈ S(t− ) and α ∈ Q. This shows that 1 ⊗ e0 is a highest weight
vector in V of highest weight Λ0 (cf. [11, Lemma 12.6]), identifying V with the irreducible
                                            CARTAN DETERMINANTS                                                  9

highest weight module V (Λ0 ). Finally, for i = 0, . . . , ℓ,
               X
      ei (z) =   ei (n) ⊗ z −n−1 = Pα′i (z)Qα′i (z −1 )eαi z a0 αi z a0 (αi |αi )/2−1 s+
                                                                                       i ,                    (3.3)
                  n∈Z
                  X
       fi (z) =         fi (n) ⊗ z −n−1 = P−α′i (z)Q−α′i (z −1 )e−αi z −a0 αi z a0 (αi |αi )/2−1 s−
                                                                                                  i ,         (3.4)
                  n∈Z
where
                                      z ±a0 αi (f ⊗ eβ ) = z (±a0 αi |β) f ⊗ eβ ,
                                          s±       β     ±         β
                                           i (f ⊗ e ) = σi (β)f ⊗ e ,
                                         e±αi (f ⊗ eβ ) = f ⊗ eβ±αi .
The following lemma will be needed later on:

Lemma 3.5. For i1 , . . . , is ∈ {0, . . . , ℓ}, roots β1′ , . . . , βt′ ∈ Q′ and γ ∈ Q, we have that
           ei1 (z1 )ei2 (z2 ) . . . eis (zs )Pβ1′ (w1 ) . . . Pβt′ (wt ) ⊗ eγ =
                          Y a0 (αi |αi )−1+a0 (αi |γ)
                     ±             zu2 u u                    u

                            1≤u≤s

                              Y                       Y                        (µk (α′i         )|α′iv )′
                                                                      −k zv
                                                                                              u
                                       a (α |α )
                        ×             zu0 iu iv               1−ω
                                                                          zu
                            1≤u<v≤s                 k∈Z/m

                             Y      Y       Y                 wv
                                                                    (µk (α′i
                                                                               u
                                                                                   )|βv′ )′
                        ×                           1 − ω −k
                                                               zu
                            1≤u≤s 1≤v≤t k∈Z/m

                        ×Pα′i (z1 ) . . . Pα′i (zs )Pβ1′ (w1 ) . . . Pβt′ (wt ) ⊗ eγ+αi1 +···+αis .
                               1             s

A similar formula holds for fi1 (z1 ) . . . fis (zs )Pβ1′ (w1 ) . . . Pβs′ (ws ) ⊗ eγ , replacing αiu by
−αiu , α′iu by −α′iu , and ᾱiu by −ᾱiu everywhere.
Proof. This follows from the following commutation relation obtained in [12, 3.4]: for
α′ , β ′ ∈ Q′ ,
                                                          Y          w k ′ ′′
                Qα′ (z −1 )Pβ ′ (w) = Pβ ′ (w)Qα′ (z −1 )   (1 − ω −k )(µ (α )|β ) ,
                                                                     z
                                                                k∈Z/m

which is a consequence of the Campbell-Hausdorff formula, cf. [11, (14.8.12)].

                                           4. The Integral form
   As in the introduction, let UZ denote the Z-subalgebra of the universal enveloping
algebra of g generated by the elements eri /r!, fir /r! for i = 0, . . . , ℓ and r ≥ 0, and let
                                             VZ := UZ (1 ⊗ e0 ) ⊂ V.
In this section, we will give an explicit description of VZ .
   To start with, let τ : g → g be the antilinear Chevalley antiautomorphism, so
                            τ (d) = d,    τ (ei (n)) = fi (−n),        τ (fi (n)) = ei (−n)
10                    JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

for each i = 0, . . . , ℓ and n ∈ Z, cf. [11, §§7.6, 8.3]. The Shapovalov form (.|.)S on V is
the unique Hermitian form such that
                      (1 ⊗ e0 , 1 ⊗ e0 )S = 1 and         (xv, w)S = (v, τ (x)w)S
for all v, w ∈ V , x ∈ g. The restriction of τ to t gives the antilinear Chevalley antiautomor-
phism of t, and we can also consider the Shapovalov form on S(t− ), satisfying (1, 1)S = 1
and (xf, g)S = (f, τ (x)g)S for all f, g ∈ S(t− ), x ∈ t.
Lemma 4.1. For all f, g ∈ S(t− ) and α, β ∈ Q, (f ⊗ eα , g ⊗ eβ )S = (f, g)S .
Proof. Since different weight spaces are orthogonal and in view of (3.2), this reduces to
checking that (1 ⊗ eα , 1 ⊗ eα )S = 1 for all α ∈ Q. Proceeding by induction, we may assume
that there is some β ∈ Q and i ∈ I such that (1 ⊗ eβ , 1 ⊗ eβ )S = 1 and either α = β + αi
or α = β − αi .
   Suppose that α = β + αi . Letting n = −a0 (αi |β) − a0 (αi |αi )/2, one checks easily using
(3.3), (3.4) that
            ei (n)(1 ⊗ eβ ) = σi+ (α)(1 ⊗ eα ),         fi (−n)(1 ⊗ eα ) = σi− (β)(1 ⊗ eβ ).      (4.2)
Hence,
                     (1 ⊗ eα , 1 ⊗ eα )S = σi+ (β)(ei (n)(1 ⊗ eβ ), 1 ⊗ eα )S
                                         = σi+ (β)(1 ⊗ eβ , fi (−n)(1 ⊗ eα ))S
                                         = σi− (α)σi+ (β)(1 ⊗ eβ , 1 ⊗ eβ )S = 1,
since σi− (α) = σi+ (β) by Lemma 3.1.
   A similar argument in the case that α = β − αi completes the proof.

Lemma 4.3. For all i = 0, 1, . . . , ℓ and n ∈ Z, the elements ei (n) and fi (n) belong to UZ .
Proof. Suppose that ei (n) 6= 0. Then, wt(ei (n)) = αi + an0 δ is a real root, hence is conjugate
under the Weyl group W associated to g to some simple root αj . So we can find simple
reflections si1 , . . . , sit ∈ W such that αi + an0 δ = si1 . . . sit αj . Let riad be the automorphism
of g defined by riad = exp(adfi ) exp(−adei ) exp(adfi ), for i = 0, 1, . . . , ℓ. Since real root
spaces of g are one dimensional,
                                        riad
                                           1
                                             . . . riad
                                                      t
                                                        ej = cei (n)
for some non-zero scalar c. Now, τ (exp(ady)(x)) = exp(−adτ (y))(τ (x)), whence by an
SL2 -calculation we have riad (x) = τ (riad (τ (x))) for all x ∈ g, we also get that
                                      riad
                                         1
                                           . . . riad
                                                    t
                                                      fj = cfi (−n).
But the riad preserve the normalized invariant form on g, so
                     aj (a∨
                          j)
                            −1
                               = (ej |fj ) = (cei (n)|cfi (−n)) = c2 ai (a∨  −1
                                                                          i ) .

Clearly, αi and αj are roots of the same length, i.e. aj (a∨
                                                           j)
                                                             −1 = a (a∨ )−1 , so this gives
                                                                     i i
                                     ad
that c = ±1. Finally, the action of ri on g leaves UZ ∩ g invariant, so
                                   ei (n) = ±riad
                                                1
                                                  . . . riad e ∈ UZ ,
                                                           s j

and similarly fi (n) ∈ UZ too.
                                         CARTAN DETERMINANTS                                                             11

   For n ≥ 1 and i = 0, 1, . . . , ℓ, define
                                                                                 (i) k1    (i) k2    (i) k3
               (i)    α′ (−a0 ndi )                (i)
                                                                   X            ydi       y2di      y3di
              yndi   = i            ,             xndi    =                                                   ··· .
                          a0 ndi                                                 k1 !      k2 !      k3 !
                                                               k1 +2k2 +···=n
Observe that
                                                                  
                                            X       (i)
                                                                                 X        (i)
                       Pα′i (z) = exp             yndi z a0 ndi  = 1 +                xndi z a0 ndi .               (4.4)
                                            n≥1                                  n≥1
       (i)
The yndi for n ≥ 1 and i ∈ I give a basis for t− . So S(t− ) is equal to the free polynomial
algebra
                                         (i)
                               B := C[yndi | n ≥ 1, i ∈ I].
             (i)                            (i)
Since the xndi are related to the yndi in a unitriangular way, we obtain a Z-form
                                                    (i)
                                    BZ := Z[xndi | n ≥ 1, i ∈ I] ⊂ B
for B. As α′ε is an integral linear combination of the α′i with i ∈ I, it follows from (4.4)
                    (ε)
that the elements xndε also belong to the lattice BZ . The Z-grading on BZ induced by the
                                                         (i)              (i)
grading on S(t− ) is determined by deg(yn ) = deg(xn ) = n.
  The following theorem (or rather its q-analogue) for the non-twisted case has been
proved in [4]. Our argument for the general case is similar.

Theorem 4.5. VZ = BZ ⊗Z Z[Q].
Proof. Let us first show that BZ ⊗Z Z[Q] ⊆ VZ . Fix i1 , . . . , is ∈ I, and let
     M (i1 , . . . , is ) = {(n1 , . . . , ns ) | n1 ≥ · · · ≥ ns ≥ 0 and dij |nj for all j = 1, . . . , s}.
Denote by > the dominance ordering on partitions belonging to M (i1 , . . . , is ). We will
                   (i )     (i )
show that xn11 . . . xnss ⊗ eβ ∈ VZ for all (n1 , . . . , ns ) ∈ M (i1 , . . . , is ) and each β ∈ Q.
                                                               (i )        (i )
Clearly every monomial in BZ is of the form xn11 . . . xnss for some choice of i1 , . . . , is and
(n1 , . . . , ns ) ∈ M (i1 , . . . , is ), so this is good enough.
  To start with, each ei (n), fi (−n) ∈ UZ by Lemma 4.3. So an obvious inductive argument
using (4.2) gives that 1 ⊗ eγ ∈ VZ for each γ ∈ Q. Hence, letting γ = β − ᾱi1 − · · · − ᾱis ,
Lemma 4.3 implies that all coefficients of ei1 (z1 ) . . . eis (zs ) ⊗ eγ belong to VZ . Applying
Lemma 3.5, we deduce that all the coefficients of
                                                                            
                        Y            Y                zv
                                                          (µk (α′i )|α′i )′
                                                                   u     v
            X :=                             1 − ω −k                        Pα′ (z1 ) . . . Pα′ (zs ) ⊗ eβ
                                                       zu                        i1              is
                   1≤u<v≤s k∈Z/m

belong to VZ . One checks that in all cases,
                        Y                  (µk (α′i )|α′i )′
                                      −k zv
                                                     u     v
                               1−ω                             = 1 + (∗),
                                         zu
                             k∈Z/m
12                      JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV
                                         p
where (∗) is a Z-linear combination of zzuv       for p ≥ 1. It follows that the z1a0 n1 . . . zsa0 ns -
coefficient of X equals
                                x(i 1)      (is )    β
                                  n1 . . . xns ⊗ e + (∗∗),
                                                     (i )      (i )
where (∗∗) is a Z-linear combination of xn′1 . . . xn′s ⊗ eβ for (n′1 , . . . , n′s ) > (n1 , . . . , ns ).
                                                      1            s
                                                                                   (i )         (i )
Using downward induction on this ordering, we deduce that xn11 . . . xnss ∈ VZ .
   Finally, we prove that BZ ⊗Z Z[Q] ⊇ VZ . As the high weight vector 1 ⊗ e0 belongs
to BZ ⊗Z Z[Q] ⊇ VZ , it suffices to show that BZ ⊗Z Z[Q] is invariant under each of the
operators fi (n)s /s! for n ∈ Z, s ≥ 1 and i = 0, 1, . . . , ℓ. Fix i ∈ {0, 1, . . . , ℓ} and consider
                        Y := fi (z1 ) . . . fi (zs )Pα′i (w1 ) . . . Pα′i (wt ) ⊗ eγ+sαi
                                                      1                  t

for i1 , . . . , it ∈ I and γ ∈ Q. Applying Lemma 3.5 and simplifying,
                                            a0
                    Y   = ±(z1 . . . zs ) 2 (αi |αi )−1−a0 (αi |γ+sαi )
                              Y           Y                     (µk (α′i )|α′i )′
                          ×                        zu − ω −k zv
                                 1≤u<v≤s k∈Z/m

                                  Y       Y                        −(µk (α′i )|α′i       )′
                                                            −k wv
                                                                                       v
                             ×                    1−ω
                                                              zu
                                 1≤u≤s k∈Z/m
                                 1≤v≤t
                             ×P−α′i (z1 ) . . . P−α′i (zs )Pα′i (w1 ) . . . Pα′i (wt ) ⊗ eγ .
                                                               1                   t

Certainly, each coefficient of P−α′i (z1 ) . . . P−α′i (zs )Pα′i (w1 ) . . . Pα′i (wt ) ⊗ eγ belongs to VZ .
                                                                       1             t
One checks that
                                                  (
          Y                 (µk (α′i )|α′i )′
                                                    (zu − zv )2 (zzu2+z   v)
                                                                             2     (r)    (2)
                                                                               if XN = A2ℓ and i = 0,
                         −k                                                2
                  zu − ω zv                     =                    u +zv

       k∈Z/m
                                                    (zua0 di − zva0 di )2      otherwise.
                                         Q
Hence in all cases, Y looks like 1≤u<v≤s (zu −zv )2 times an expression that is symmetric in
z1 , . . . , zs . Hence, by [4, Lemma 2.5(ii)], the coefficient of (z1 . . . zs )−n−1 in Y is divisible
by s!. Hence, all coefficients of (fi (n)s /s!)Pα′i (w1 ) . . . Pα′i (ws ) ⊗ eγ−sαi belong to VZ ,
                                                              1                s
which completes the proof.

                                         5. The determinant
  Fix now some d ≥ 0. Lemma 4.1 and Theorem 4.5 reduce the problem of computing the
determinant of the Shapovalov form on the (wΛ0 − dδ) weight space of VZ for any w ∈ W
to the problem of computing the determinant of the Shapovalov form on the degree d
component of BZ . To tackle the latter question, observe
                     O       (i) (i)
                                                      O     (i) (i)
                 B=      C[ydi , y2di , . . . ], BZ =    Z[xdi , x2di , . . . ].
                           i∈I                                         i∈I
                                         CARTAN DETERMINANTS                                            13

So according to [5, Corollary 2.1], there is a well-defined Hermitian form on B determined
by the rules
                                              (i)              ∂
                       (1, 1)K = 1,      (nyndi f, g)K = (f, (i) g)K
                                                             ∂yndi
for all i ∈ I, n ≥ 1 and f, g ∈ B. Moreover, there is a homogeneous basis for the lattice
BZ (given by Schur polynomials) that is orthonormal with respect to the form (. , .)K . In
particular, the determinant of the form (. , .)K on the degree d component of BZ is equal to
1. Our strategy will therefore be to relate the Shapovalov form (. , .)S to the form (. , .)K .
                                                                   (n)
   Define I(n) = {i ∈ I | di |n}. Introduce the matrices A(n) = (ai,j )i,j∈I(n) with
                                                     r−1
                                   (n)     1 ′ X a0 nk k ′ ′
                               ai,j =        (α | ω   µ (αj )) .
                                           di i
                                                     k=0
Recall α, β from the introduction. One verifies:
                                                            
                                                                α if r | n,
Lemma 5.1. For any n ≥ 0, we have det A(n) =
                                                                β if r ∤ n,
                                                                                                  (i)
    The significance of the matrices A(n) is that for i ∈ I(n), the element τ (nyn /di ) =
                                            P       (n)
α′i (a0 n)/a0 di acts on B as the operator j∈I(n) ai,j ∂(j) . We set
                                                        ∂yn
                                             X (n)
                                     zn(i) =    ai,j yn(j) .
                                                   j∈I(n)

For a partition λ = (λ1 ≥ · · · ≥ λh > 0) we let I(λ) = I(λ1 ) × · · · × I(λh ). Given
i = (i1 , . . . , ih ) ∈ I(λ), let
             (i)    (i )    (i )           (i)       (i )   (i )          (i)    (i )     (i )
           xλ = xλ11 . . . xλhh ,         yλ = yλ11 . . . xλhh ,         zλ = zλ11 . . . xλhh ,
all elements of B of degree |λ|.
                                                                   (i)           (i)
Lemma 5.2. For i ∈ I(λ) and any f ∈ B, we have (yλ , f )S = (zλ , f )K .
Proof. Proceed by induction on the number of non-zero parts of λ, starting induction from
the obvious fact that (1, f )S = (1, f )K . For the induction step, note that for i ∈ I(n),
                        (i)         di (i) X (n) ∂
                (yn(i) yλ , f )S = ( yλ ,       ai,j   (j)
                                                           f )S
                                    n                ∂yn
                                                 j∈I(n)
                                 di (i) X (n) ∂                     (i)
                              = ( zλ ,    ai,j   (j)
                                                     f )K = (zn(i) zλ , f )K .
                                 n             ∂yn
                                                 j∈I(n)



  Let
                     Ω(λ) = {i ∈ I(λ) | ij ≤ ij+1 whenever λj = λj+1 }.
14                   JONATHAN BRUNDAN AND ALEXANDER KLESHCHEV

          (i)                             (i)                            (i)
Then {xλ | λ ∈ P(d), i ∈ Ω(λ)}, {yλ | λ ∈ P(d), i ∈ Ω(λ)} and {zλ | λ ∈ P(d), i ∈ Ω(λ)}
give three different bases for the degree d component of B. Consider the transition matrices
       i,j              i,j
P = (pλ,µ  ) and Q = (qλ,µ  ) where λ, µ ∈ P(d), i ∈ Ω(λ), j ∈ Ω(µ) defined from
                 (i)
                            X         i,j (j)      (i)
                                                             X         i,j (j)
                xλ =                 pλ,µ yµ ,    zλ =               qλ,µ yµ .
                      µ∈P(d), j∈Ω(µ)                       µ∈P(d), j∈Ω(µ)

                                                 i,j
Lemma 5.3. The matrix Q is block diagonal, i.e. qλ,µ = 0 for λ 6= µ. Moreover, the
                                  i,j
determinant of the λ-block Qλ = (qλ,λ )i,j∈Ω(λ) of Q is αaλ β bλ , notation as in the introduc-
tion.
                                                       i,j
Proof. It is immediate from the definition that qλ,µ        = 0 for λ 6= µ. So consider the λ-block
Qλ of Q. Represent λ = (λ1 ≥ · · · ≥ λh > 0) instead as (1r1 2r2 . . . srs ). By definition,
                               (i)
                                      X (λ )                (λh ) (j)
                              zλ =         ai1 ,j1 1 . . . aih ,j  y .
                                                                  h λ
                                           j∈I(λ)

Thus Qλ is the matrix S r1 (A(1) ) ⊗ · · · ⊗ S rs (A(s) ), a tensor product of symmetric powers
of the matrices A(n) . Now, note that for an n × n matrix A,
                                                           n+m−1
                               det S m (A) = (det A)( n ) ,
while for an n × n matrix B and an m × m matrix C,
                               det(B ⊗ C) = (det B)m (det C)n .
These are both proved by reducing to the case that the matrices are diagonal. Combining
the formulae with Lemma 5.1, one computes det Qλ = αaλ β bλ .
     Now we can prove the main theorem:

Theorem 5.4. Q The determinant of the restriction of the Shapovalov form to the degree d
part of BZ is λ∈P(d) αaλ β bλ .

Proof. Consider the matrices M = (mi,j             i,j
                                   λ,µ ) and N = (nλ,µ ) for λ, µ ∈ P(d), i ∈ Ω(λ),
j ∈ Ω(µ) defined from
                                    (i)                       (i)
                         mi,j          (j)
                          λ,µ = (xλ , xµ )S ,       ni,j          (j)
                                                     λ,µ = (xλ , xµ )K .
Recalling the transition matrices P and Q introduced above, Lemma 5.2 gives at once
that M = P QP −1 N. On the other hand, N has determinant 1, since as we observed
above the degree d component of BZ admits an orthonormal basis with respect to the
contravariant form (. , .)K (see [5, Corollary 2.1]). So we can compute det M at once using
Lemma 5.3.
   We finally indicate how to deduce the generating functions a(q) and b(q) stated in the
introduction. By definition, aλ is
                                                                                   
   h      the number of ways of coloring          the number of ways of coloring
     ×                                        ×
   ℓ      the parts λi ≡ 0 (r) with ℓ colors      the parts λi 6≡ 0 (r) with k colors
                                       CARTAN DETERMINANTS                                                15

where h is the number of λi ≡ 0 (r). Consider
                                                ℓ               k
                                  Y      1            Y 1 − q nr u
                   G(q, t, u) =                                  .
                                      1 − q nr t        1 − qnu
                                         n≥1                   n≥1

The coefficient of  q d th ui
                          is equal to the number of partitions of d with h parts divisible by r
colored by ℓ different colors and with i parts notPdivisible by r colored by k different colors.
Hence the generating function a(q) for a(d) = λ∈P(d) aλ is equal to 1ℓ dt    d
                                                                               G(q, t, u)|t=u=1 .
                   1 d
Similarly, b(q) = k du G(q, t, u)|t=u=1 .

                                               References
   [1] S. Ariki, On the decomposition numbers of the Hecke algebra of type G(m, 1, n), J. Math. Kyoto
       Univ. 36 (1996), 789–808.
   [2] C. Bessenrodt and J. Olsson, A note on Cartan matrices for symmetric groups, preprint, 2001.
                                                                                            (2)
   [3] J. Brundan and A. Kleshchev, Hecke-Clifford superalgebras, crystals of type A2ℓ and modular
       branching rules for Sbn , Representation Theory 5 (2001), 317–403.
   [4] V. Chari and N. Jing, Realization of level one representations of Uq (b  g) at a root of unity, Duke
       Math. J. 108 (2001), 183–197.
   [5] C. De Concini, V. Kac and D. Kazhdan, “Boson-Fermion correspondence over Z”, in: Infinite-
       dimensional Lie algebras and groups (Luminy-Marseille, 1988), Adv. Ser. Math. Phys. 7 (1989),
       124–137.
   [6] C. Curtis and I. Reiner, Representation theory of finite groups and associative algebras, Wiley, 1988.
   [7] S. Donkin, Representations of Hecke algebras and characters of symmetric groups, preprint, 2001.
   [8] I. Frenkel and V. Kac, Basic representations of affine Lie algebras and dual resonance modules,
       Invent. Math. 62 (1980), 23–66.
   [9] I. Grojnowski, Affine slb p controls the modular representation theory of the symmetric group and
       related Hecke algebras, preprint, 1999.
  [10] J. F. Humphreys, Blocks of projective representations of the symmetric groups, J. London Math.
       Soc. 33 (1986), 441–452.
  [11] V. Kac, Infinite dimensional Lie algebras, Cambridge University Press, third edition, 1995.
  [12] J. Lepowsky, Calculus of twisted vertex operators, Proc. Natl. Acad. Sci. USA 82 (1985), 8295–8299.
  [13] A. Mathas, Iwahori-Hecke algebras and Schur algebras of the symmetric group, University Lecture
       Series 15, Amer. Math. Soc., 1999.

  Department of Mathematics, University of Oregon, Eugene, OR 97403, USA
  E-mail address: brundan@darkwing.uoregon.edu, klesh@math.uoregon.edu
