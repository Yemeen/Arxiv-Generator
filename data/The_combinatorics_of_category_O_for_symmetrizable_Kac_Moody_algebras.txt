                                                   THE COMBINATORICS OF CATEGORY O OVER
                                                    SYMMETRIZABLE KAC-MOODY ALGEBRAS
arXiv:math/0305378v2 [math.RT] 25 Feb 2004




                                                                              PETER FIEBIG∗

                                                      Abstract. We show that the structure of blocks outside the criti-
                                                      cal hyperplanes of category O over any symmetrizable Kac-Moody
                                                      algebra depends only on the corresponding integral Weyl group
                                                      and its action on the parameters of the Verma modules by giving
                                                      a combinatorial description of the projective objects. As an appli-
                                                      cation we derive the Kazhdan-Lusztig conjecture for non–integral
                                                      blocks from the integral case in finite and affine situations.



                                                                            1. Introduction
                                                One of the most prominent categories of representations of triangu-
                                             lated Lie algebras is the category O, originally introduced by Bernstein,
                                             Gelfand and Gelfand. It provides the natural framework for the study
                                             of highest weight modules. In [Soe1] Soergel showed that in the case
                                             of a finite dimensional, semisimple complex Lie algebra one can give a
                                             description of the categorical structure of O in terms of the correspond-
                                             ing Weyl group. This article provides the corresponding statement for
                                             symmetrizable Kac-Moody algebras.
                                                Let us first review Soergel’s result and the main ideas in its proof. Let
                                             g be a finite dimensional semisimple complex Lie algebra and choose
                                             a Borel subalgebra b ⊂ g and a Cartan subalgebra h ⊂ b. The simple
                                             objects L(λ) of the corresponding Q category O are then parametrized
                                             by elements λ ∈ h⋆ . Let O = Λ OΛ be the decomposition of O into
                                             indecomposable blocks. We can identify a parameter Λ with the set of
                                             simple objects in OΛ , hence with a subset of h⋆ . Then each of these
                                             subsets Λ is an orbit of a subgroup W(Λ) of the Weyl group W of g
                                             under the linear action shifted by the half sum of positive roots. In
                                             particular, Λ is finite. There is a prefered choice of simple reflections
                                             S(Λ) ⊂ W(Λ) and (W(Λ), S(Λ)) forms a Coxeter system. Soergel
                                             proved that OΛ depends only on the isomorphism class of this system
                                             and on its action on Λ. More precisely, if h ⊂ b ⊂ g and h′ ⊂ b′ ⊂ g′
                                             are two semisimple Lie algebras together with Cartan and Borel subal-
                                             gebras and OΛ and OΛ′ ′ are two blocks of the corresponding categories
                                               ∗
                                                   supported by the German Academic Exchange Service (DAAD).
                                                                                      1
2                       THE COMBINATORICS OF O

such that there is an isomorphism (W(Λ), S(Λ)) ∼    = (W ′ (Λ′ ), S ′ (Λ′ )) of
the associated Coxeter systems which induces a bijection Λ ∼        = Λ′ of
orbits, then there is an equivalence OΛ ∼= OΛ′ ′ of categories.
   The proof consists of a combinatorial description of the structure of
a block OΛ in terms of (W(Λ), S(Λ)) and its action on Λ. The main
ideas are the following. First, let λ ∈ Λ be the dominant weight. For
any wL∈ W(Λ) let P (w.λ) be the projective cover of L(w.λ). Then
P =      P (w̄.λ), where the sum is taken over w̄ ∈ W(Λ)/Stab(λ), is
a faithful small projective, i.e. Hom(P, ·) : OΛ → mod-End(P ) is an
equivalence of categories. Soergel gave a combinatorial, though not
explicit description of End(P ). Let us assume that Λ is regular, i.e.
W(Λ) acts faithfully on Λ. Let w0 ∈ W(Λ) be the longest element,
hence P (w0 .λ) is the antidominant projective module. To the Coxeter
system (W(Λ), S(Λ)) one associates the commutative algebra of coin-
variants C = C(W(Λ), S(Λ)) which comes equipped with an action of
W(Λ). For any s ∈ S(Λ) let C s ⊂ C be the subalgebra of s–invariant
elements. There is an isomorphism C ∼  = End(P (w0 .λ)), hence we get a
functor V := Hom(P (w0 .λ), ·) : OΛ → C-mod. The next two properties
of V are crucial.
    (A) If P and P ′ are projective in OΛ , then V induces an isomorphism
        HomO (P, P ′) ∼= HomC (VP, VP ′).
    (B) If s ∈ S(Λ) and Θs : OΛ → OΛ is the corresponding functor of
        “translation through the s–wall”, then V ◦ Θs ∼   = C ⊗C s V.
By (A) we have to describe VP (w.λ) as a C–module. We do this by
induction on the length of w in the Coxeter system (W(Λ), S(Λ)). To
start with, VP (λ) ∼  = C is the unique simple quotient of C. Let w =
s1 · · · sn be a reduced expression and choose any direct decomposition
of Θsn · · · Θs1 M(λ). Then P (w.λ) is isomorphic to the indecomposable
direct summand that is not isomorphic to P (w ′.λ) with l(w ′) < l(w).
By (A) and (B), VP (w.λ) is the indecomposable direct summand of
C ⊗C sn C · · · ⊗C s1 C that is not isomorphic to VP (w ′.λ) with l(w ′ ) <
l(w). So we inductively established the description of all VP (w.λ) as
modules over C for regular Λ. If Λ is not regular, one can give a
desription of all projective objects using the regular case and a functor
of “translation on the walls”.
   Now let g be a symmetrizable Kac-Moody algebra. Then any pa-
rameter Λ for the block decomposition of O is again given by a subset
of h⋆ and, if Λ does not intersect the critical hyperplanes (i.e. the hy-
perplanes defined by an integrality condition on imaginary roots), then
Λ is again an orbit under a subgroup W(Λ) of W, which is part of a
Coxeter datum (W(Λ), S(Λ)). Λ is not necessarily finite.
                      THE COMBINATORICS OF O                            3

  From now on let Λ be outside the critical hyperplanes. We prove
a generalization of Soergel’s result for the symmetrizable Kac-Moody
case (Theorem 4.1). We follow the ideas explained above, though most
statements need different proofs.
  We distinguish two cases. In the first case we assume that Λ contains
a dominant weight, i.e. a highest weight under the usual partial order
on h⋆ . In the second case it contains an antidominant, i.e. lowest,
weight. Suppose Λ contains a dominant weight λ ∈ Λ. Then there exist
projective covers P (w.λ) of L(w.λ) for any w ∈ W(Λ) and the set PΛ :=
{P (w̄.λ), w̄ ∈ W(Λ)/Stab(λ)} is a faithful set of small projectives in
the sense of [Mit], i.e. the functor
                                             opp
                         OΛ → (C-mod)PΛ
                         M 7→ Hom(·, M)
                                                   opp
is an equivalence of categories, where (C-mod)PΛ is the category of
all additive functors PΛopp → C-mod. Hence we have to describe PΛ .
    If Λ is infinite and contains an antidominant weight, there are no
projective objects at all in OΛ . However, there is a tilting equivalence
        ∼
t : M → Mopp , where M ⊂ O is the full subcategory of modules which
                                                                ∼
admit a Verma flag. It induces an equivalence of blocks MΛ → Mt(Λ) ,
where t(Λ) will contain a dominant weight. Moreover, the structure
of M(Λ) determines the structure of OΛ , hence we have reduced the
second case to the first.
    We need to define the functor V. To start with, let λ ∈ Λ be an
antidominant weight. Then we construct the “antidominant projec-
tive cover” P ∞ (λ) as a certain limit of antidominant projective covers
in truncated subcategories. Then we replace the algebra of coinvari-
ants by the specialization ZΛ of the categorical (or Bernstein) cen-
ter of a deformed version of OΛ , which was calculated in [Fie]. It
only depends on W(Λ) and its action on Λ. We show that there
is a natural isomorphism ZΛ ∼     = End(P ∞ (λ)), so we get a functor
                ∞
V = Hom(P (λ), ·) : OΛ → ZΛ -mod. Restricting to the category of
modules with Verma flag and using the tilting equivalence we analo-
gously get a functor V : MΛ → ZΛ -mod in the case when Λ contains a
dominant weight. Since every projective object in OΛ admits a Verma
flag, this serves our purpose.
    In [Fie], translation functors on MΛ were constructed and it was
shown that they behave as in the finite dimensional situation, in par-
ticular they can be used to construct projective objects. So we have
to verify statements (A) and (B). The original proofs in [Soe1] do not
work in the infinite setup, since V is not a quotient functor. This
4                      THE COMBINATORICS OF O

might be remedied by certain limit and completion procedures, though
we choose another way. We first prove both statements in the generic
and subgeneric cases (Theorem 3.2 & Theorem 3.4), i.e. when W(Λ) is
either trivial or contains only one reflection. This is done more or less
by explicit verification. We then use the deformation construction as
described in [Fie] to reduce the general case to the generic or subgeneric
cases (Theorem 3.14 & Theorem 3.15).
   As an application we prove the Kazhdan-Lusztig conjecture for sym-
metrizable Kac-Moody algebras under the assumption that the associ-
ated Coxeter system (W(Λ), S(Λ)) is of finite or affine type by reduc-
tion to the integral case (Theorem 5.1). As a byproduct of the theory of
translation functors we derive the uniqueness of embeddings of Verma
modules outside the critical hyperplanes (Theorem 3.10), originally
proved in the dominant case by Kashiwara-Tanisaki [KT4].
   I wish to thank Bernhard Keller for help with the categorical con-
cepts used in this article and Wolfgang Soergel for many discussions.
A major part of this work was done during a stay at the Mathemati-
cal Sciences Research Institute at Berkeley which was financed by the
German Academic Exchange Service (DAAD). I am grateful towards
both institutions.

                          2. Preliminaries
  Let g be a complex symmetrizable Kac-Moody algebra, b ⊂ g its
Borel subalgebra and h ⊂ b its Cartan subalgebra. Let U = U(g),
B = U(b) and S = U(h) = S(h) = C[h⋆ ] be the universal enveloping
algebras. Let Π ⊂ ∆+ ⊂ ∆ ⊂ h⋆ be the set of simple roots, the set of
positive roots and the set of roots of g with respect to h and b. Let
∆re and ∆im be the sets of real and imaginary roots. Define the usual
partial order on h⋆ by setting λ − µ ≥ 0 if and only if λ − µ ∈ N Π.
  In this section we will quote the results and describe the methods
that we will use in the following. Unless stated otherwise, the proofs
can be found in [Fie].
2.1. Local deformation algebras. We will call a commutative, as-
sociative, noetherian, unital S–algebra which is a local domain a local
deformation algebra. For any such algebra T the S–structure is given
by the structure morphism τ : S → T . We will be particularly inter-
ested in the following examples.
   Let R = S(h) be the localization of S at the maximal ideal generated
by h ⊂ S, i.e. the localization at 0 ∈ h⋆ . For any prime ideal p ⊂ R
let Rp be the localization of R at p and let Kp = Rp/Rpp be the corre-
sponding residue field. The rings R, Rp and Kp are local deformation
                       THE COMBINATORICS OF O                            5

algebras. Note that as a special case the residue field C of R inherits
an S–algebra structure, where the structure morphism S → C is given
by evaluation at 0 ∈ h⋆ .
   A symmetrizable Kac-Moody algebra admits a non–degenerate, sym-
metric, invariant bilinear form (·, ·) : g × g → C. It restricts to a non–
degenerate form on h×h and induces a non–degenerate form on h⋆ ×h⋆ .
Let T be any local deformation algebra and let h⋆T := h⋆ ⊗C T =
HomC (h, T ). By T–bilinear extension we arrive at a non–degenerate
form (·, ·)T : h⋆T × h⋆T → T . The restriction of the structure morphism
τ : S → T to h ⊂ S is an element in h⋆T . Moreover we have an obvious
inclusion h⋆ ⊂ h⋆T . Hence we can define the element
                           hλ := (τ, λ)T ∈ T
for any λ ∈ h⋆ .

2.2. Deformed category O. Let T be a local deformation algebra.
For any U ⊗C T –module M and λ ∈ h⋆ set
           Mλ := {m ∈ M | H.m = (λ + τ )(H)m ∀H ∈ h},
where we view (λ + τ )(H) as an elementLin T . Let OT be the category
of U ⊗C T –modules M such that M = λ∈h⋆ Mλ and such that B ⊗C
T.m is finitely generated over T for any m ∈ M. Then OT is an
abelian category and in the special case T = C with any S–structure
we arrive at the well–studied BGG–category O. For any morphism of
local deformation algebras T → T ′ there is a base change functor
                          · ⊗T T ′ : OT → OT ′ .
For any λ ∈ h⋆ we define the Verma module
                          MT (λ) := U ⊗B Tλ ,
where Tλ denotes the B–structure on T given by the composition B →
   λ+τ
S → T with a left invers map B → S of the inclusion S → B. The
Verma modules are objects of OT .
  For any ν ∈ h⋆ consider the full subcategory OT6ν of OT of modules
M such that Mµ = 0 if µ 6≤ ν. In contrast to OT , the subcategories OT6ν
have enough projective objects. Moreover, the categories OT6ν provide
a filtration of OT in the sense that every finitely generated object of
OT lies in a finite direct sum of OT6ν ’s. Let m ⊂ T be the maximal
ideal of T and K = T /m the residue field. Consider the base change
functor · ⊗T K.
Theorem 2.1 ([Fie], Proposition 2.1 & 2.6).
6                      THE COMBINATORICS OF O

    (1) The base change · ⊗T K gives a bijection
                                                       
         simple isomorphism            simple isomorphism
                               ←→                           .
             classes of OT                 classes of OK
    (2) For any ν ∈ h⋆ the base change · ⊗T K gives a bijection
                                                           
        projective isomorphism         projective isomorphism
                                 ←→                             .
             classes of OT6ν                classes of OK6ν
   The category OK is a direct summand of the usual category O over
the Kac-Moody algebra g ⊗C K consisting of all objects whose weights
lie in the complex affine subspace τ + h⋆ = τ + HomC (h, C) ⊂ h⋆K =
HomK (h ⊗C K, K). Hence the simple isomorphism classes of OK (and
hence of OT ) are parametrized by their highest weights, i.e. by elements
of h⋆ . Let LT (λ) be a simple object in OT corresponding to λ ∈ h⋆ . It
is a quotient of the Verma module MT (λ).
   We have the following structure theorem for projective objects.
Theorem 2.2 ([Fie], Proposition 2.4 & 2.7). Let T be a local defor-
mation algebra and K its residue field. Let ν ∈ h⋆ and let LT (λ) be a
simple object in OT6ν .
   (1) There is a projective cover PT6ν (λ) of LT (λ) in OT6ν . Every pro-
       jective object in OT6ν is isomorphic to a direct sum of projective
       covers.
   (2) PT6ν (λ) has Verma flag, i.e. a filtration with subquotients iso-
       morphic to Verma modules, and for the multiplicities the BGG–
       reciprocity formula
                  PT6ν (λ) : MT (µ) = MK (µ) : LK (λ)
                                                      

        holds for all Verma modules MT (µ) in OT6ν .
    (3) Let T → T ′ be a morphism of local deformation algebras and P
        projective in OT6ν . Then P ⊗T T ′ is projective in OT6ν′ . If P is
        finitely generated, then the natural transformation
            HomOT (P, ·) ⊗T T ′ → HomOT ′ (P ⊗T T ′ , · ⊗T T ′ )
        is an isomorphism of functors from OT to T ′ -mod.
  Part (3) of the theorem says that this deformation theory is a coher-
ent deformation of categorical structures.
2.3. Block decomposition. Let T be a local deformation algebra and
K its residue field. Let ∼T be the equivalence relation on h⋆ generated
by λ ∼T µ if there exist n ∈ N and β ∈ ∆+ such that 2(λ + τ + ρ, β)K =
n(β, β)K and λ − µ = nβ, where ρ ∈ h⋆ is a Weyl vector, i.e. (ρ, α) = 1
for any simple root α ∈ Π. Then ∼T does not depend on the choice
                       THE COMBINATORICS OF O                            7

of ρ and, by definition, ∼T =∼K . For any union of equivalence classes
Λ ⊂ h⋆ /∼T let OT,Λ be the full subcategory of OT consisting of all M
such that the highest weight of every simple subquotient of M lies in
Λ. If Λ is a single equivalence class, then OT,Λ is called a block of OT .
                                                                 L
Theorem 2.3 ([Fie], Proposition 2.8). The functor {MΛ } 7→         MΛ is
an equivalence of categories
                                         ∼
                             Y
                                   OT,Λ → OT .
                          Λ∈h⋆ /∼T

   For any morphism of local deformation algebras T → T ′ the equiva-
lence relation ∼T ′ is finer than ∼T and hence the base change · ⊗T T ′
respects the block decomposition, i.e. it induces a base change functor
OT,Λ → OT ′ ,Λ .
   We will consider only blocks outside the critical hyperplanes, i.e.
blocks corresponding to equivalence classes which do not intersect the
hyperplanes defined by 2(λ + ρ + τ, β)K = n(β, β)K for any n ∈ N and
an imaginary root β ∈ ∆im . For any equivalence class Λ ∈ h⋆ /∼T let
  ∆T (Λ) := {β ∈ ∆ | 2(λ + ρ + τ, β)K ∈ Z(β, β)K      for some λ ∈ Λ}
be the set of integral roots with respect to Λ. Hence Λ lies outside the
critical hyperplanes if and only if ∆T (Λ) ⊂ ∆re . In this case choose
λ ∈ Λ. Let W be the Weyl group of g. It naturally acts on h⋆ by linear
transformations. Define the shifted action by w.ν = w(ν + ρ) − ρ for
w ∈ W and ν ∈ h⋆ . Again this action does not depend on the choice
of ρ. Then
                             Λ = WT (Λ).λ,
where WT (Λ) is the integral Weyl group with respect to Λ, i.e. the group
that is generated by the reflections sα corresponding to α ∈ ∆T (Λ).
   View C as the residue field of R, hence it inherits the S–structure
given by evaluation at 0 ∈ h⋆ . Then OC is nothing else than the
well–known BGG–category O over g with respect to h and b, MC (λ)
and LC (λ) are the Verma module and the simple module with highest
weight λ and the relations ∼C and ∼R coincide with the usual equiv-
alence relation ∼ on h⋆ , given by the submodule structure of Verma
modules. Hence we will omit the subscripts and write ∆(Λ) and W(Λ)
for the integral roots and the integral Weyl group of an equivalence
class Λ with respect to this relation. Define ∆+ (Λ) = ∆(Λ) ∩ ∆+ ,
Π(Λ) := {α ∈ ∆+ (Λ) | sα (∆+ (Λ) \ {α}) ⊂ ∆+ (Λ)} and S(Λ) = {sα |
α ∈ Π(Λ)}. Then (W(Λ), S(Λ)) is a Coxeter system. The main re-
sult of this article is that the structure of OΛ only depends on the
isomorphism class of this Coxeter system and its action on Λ.
8                      THE COMBINATORICS OF O

2.4. Structure of generic and subgeneric blocks. Let T be a local
deformation algebra and Λ ∈ h⋆ /∼T an equivalence class. We will call
Λ generic if it contains only one element, and subgeneric if it contains
exactly two elements. The corresponding blocks will also be called
generic and subgeneric, resp. In this section we will explicitely describe
the structure of generic and subgeneric blocks of OT .
  Suppose Λ ∈ h⋆ /∼T contains only finitely many elements. Then
                        6ν
OT,Λ is the same as OT,Λ   for ν big enough, hence there exist projective
covers PLT (λ) of all simple objects LT (λ) in OT,Λ and their direct sum
PT,Λ = λ∈Λ PT (λ) is a faithful, small projective in the sense of [Mit].
The functor
                 Hom(PT,Λ , ·) : OT,Λ → mod-End(PT,Λ )
is an equivalence of categories. We will describe a generalization of this
equivalence for infinite Λ in section 4.
   Suppose Λ ∈ h⋆ /∼T is generic, i.e. Λ = {λ}. Then PT,Λ = PT (λ) =
MT (λ). If Λ is subgeneric, i.e. Λ = {λ, µ} and λ > µ, then PT (λ) =
MT (λ) and there exists a short exact sequence
                              i          π
                0 → MT (λ) −→ PT (µ) −→ MT (µ) → 0.
Standard arguments (involving the Jantzen filtration) show that there
is an injection MK (µ) → MK (λ) (note that there is, in general, no
non–trivial map MT (µ) → MT (λ)). Composing with the surjection
PK (µ) → MK (µ) gives a map PK (µ) → MK (λ). By Theorem 2.2, (3) we
can lift it to a morphism PT (µ) → MT (λ). Let h ∈ End(MT (λ)) = T be
the composition with the inclusion of the short exact sequence above.
Note that h ∈ T is well–defined up to multiplication with an invertible
element in T .
Proposition 2.4 ([Fie], Example 2.2 & Proposition 3.4).
  (1) (generic case) If Λ = {λ} , then
                          OT,Λ ∼
                               = T -mod.
    (2) (subgeneric case) If Λ = {λ, µ} and λ > µ, then End(PT,Λ ) is
        isomorphic to the path algebra of the quiver
                                   i
                         λ                   µ

                                   j
       over T with relation j ◦ i = h, i.e. to the T –algebra generated
       by the paths of the quiver with relation j ◦ i = heλ , where eλ is
       the trivial path at the vertex λ.
                      THE COMBINATORICS OF O                           9

Remark 2.5.    (1) In the case T = R and λ = sα .µ for α ∈ ∆re it
      was shown in Proposition 3.4 in [Fie] that the homomorphisms
      can be chosen in such a way that h = hα ∈ R.
  (2) The quiver encodes the homomorphisms between PT (µ) and
      PT (λ) as follows. The µ–vertex (resp. the λ–vertex) in the
      quiver represents PT (µ) (resp. PT (λ)) and the space of mor-
      phisms is generated over T by the paths between the resp. ver-
      tices modulo the relations.
2.5. Translation functors. Let T be any local deformation algebra
and Λ, Λ′ ∈ h⋆ /∼T equivalence classes outside the critical hyperplanes.
Choose λ ∈ Λ and λ′ ∈ Λ′ . Suppose that
    (1) λ−λ′ is integral and either positive or negative. Hence ∆T (Λ) =
        ∆T (Λ′ ) and WT (Λ) = WT (Λ′ ).
    (2) Both λ and λ′ lie in the closure of the same Weyl chamber, i.e.
        (λ + ρ + τ, β)K ∈ Z≥0 (β, β) if and only if (λ′ + ρ + τ, β)K ∈
        Z≥0 (β, β) for all β ∈ ∆T (Λ).
    (3) Stab(λ) ⊂ Stab(λ′ ) with finite index (Stab denotes the stabi-
        lizer under the ρ–shifted action of W). Hence Λ′ lies “on the
        walls”.
Let MT be the full subcategory of OT consisting of modules which
admit a finite Verma flag, i.e. a finite filtration whose subquotients
are isomorphic to Verma modules. Let MT,Λ and MT,Λ′ be the corre-
sponding blocks. In [Fie] we defined the translation functors
                    ϑout = ϑT,out : MT,Λ′ → MT,Λ
and
                      ϑon = ϑT,on : MT,Λ → MT,Λ′ .
In the case that Λ is regular, i.e. Stab(λ) = {e} and Λ′ is subregular,
i.e. Stab(λ′ ) = {e, s} for some reflection s, we call the composition
Θs := ϑout ◦ ϑon the “translation through the s–wall”. We summarize
the properties of translation functors in the following
Theorem 2.6 ([Fie], Proposition 4.1 & 5.2, Lemma 5.4, Corollary 5.10
& 5.11).
   (1) ϑout and ϑon transform short exact sequences to short exact se-
       quences.
   (2) Let w ∈ WT (Λ). Then ϑon MT (w.λ) is isomorphic to MT (w.λ′)
       and ϑout MT (w.λ′) has a Verma flag with subquotients MT (wx̄.λ)
       for x̄ ∈ Stab(λ′ )/Stab(λ), each occurring once.
   (3) If Stab(λ) = Stab(λ′ ), then ϑon and ϑout are mutually inverse
       equivalences of categories.
10                       THE COMBINATORICS OF O

     (4) Any base change T → T ′ induces isomorphisms
                   ϑT,on (·) ⊗T T ′ ∼
                                    = ϑT ′ ,on (· ⊗T T ′ ),
                  ϑT,out (·) ⊗T T ′ ∼
                                    = ϑT ′ ,out (· ⊗T T ′ )
         between the resp. translation functors (note that, in general, the
         functor ϑT ′ ,∗ (· ⊗T T ′ ) splits into a direct product of translation
         functors, cp. [Fie], Lemma 5.4).
     (5) ϑon is left adjoint to ϑout . If P ∈ MT,Λ is projective in OT,Λ ,
         then ϑon P is projective in OT,Λ′ .
     (6) Assume that T is R, Rp or one of their residue fields. Then
         ϑout and ϑon are biadjoint. If P ′ ∈ MT,Λ′ is projective in OT,Λ′ ,
         then ϑout P ′ is projective in OT,Λ .
2.6. The tilting equivalence. Let T be any local deformation alge-
bra with S–structure τ : S → T . Let γ : S → S be the automorphism
which is given by γ(h) = −h for all h ∈ h and let T̄ be the S–algebra
which is isomorphic to T as an algebra, but where the S–structure is
replaced by τ̄ = τ ◦ γ. In particular, γ can be thought of as an isomor-
phism γ : S → S̄ of S–algebras. Since h ⊂ S is γ–stable, it induces an
isomorphism of S–algebras R → R̄ and for any γ–stable prime ideal
p ⊂ R an isomorphism Rp → R̄p. These are again denoted by γ.
   Following [Soe2] we will construct the tilting functor t′ : MT →
MoppT̄
        corresponding to the semi–infinite character 2ρ. Let S2ρ be the
semi–regularL   U–bimodule of [Soe2]. For any g ⊗ T –module N we de-
fine N ⊛ :=      λ∈h⋆ HomT (Nλ , T ) and we let g act on N
                                                           ⊛
                                                             by defining
                                         ⊛
(Xf )(n) = −f (Xn) for n ∈ N, f ∈ N and X ∈ g. For any M ∈ MT
set
                         t′ (M) := (S2ρ ⊗U M)⊛.
As in [Soe2] one shows that t′ (MT (λ)) is isomorphic to MT̄ (−2ρ − λ),
that t′ transforms short exact sequences of modules with Verma flag
to short exact sequences and that it defines an equivalence t′ : MT →
MoppT̄
        of categories.
   Let T be R, Rp, where p is γ–stable, or one of their residue fields.
The isomorphism γ : T → T̄ induces an equivalence of categories MT ∼   =
                              ′                                  opp
MT̄ and composition with t gives an equivalence t : MT → MT with
t(MT (λ)) ∼ = MT (−2ρ − λ). Moreover, t respects the block structure,
i.e. for any Λ ∈ h⋆ /∼T it induces an equivalence
                                          ∼
                          t = tΛ : MT,Λ → MT,t(Λ) ,
where t(Λ) := {−2ρ − λ | λ ∈ Λ}. An easy calculation shows that this
is again an equivalence class (note that −w.λ − 2ρ = w.(−λ − 2ρ)).
This is most useful for us, since t(Λ) contains a highest weight if and
                        THE COMBINATORICS OF O                           11

only if Λ contains a lowest weight. This allows us to choose for any
of the following constructions the most convenient case. We will, for
example, first define the structure functor for equivalence classes with
lowest weight, but we will then use it mainly in the case with highest
weight, because this is the case where projective objects exist.
   Let ZT,Λ be the center of OT,Λ , i.e. the ring of endotransformations of
the identity functor. In Section 3.1 we will give an explicit description
of this center for generic and subgeneric blocks and in Theorem 3.6 for
any block outside the critical hyperplanes provided that T = R.
Lemma 2.7. There is a natural identification
                                   ∼
                              ZT,Λ → ZT,t(Λ)
induced by t.
Proof. Restriction gives an isomorphism between the center of OT and
the center of MT , since every finitely generated object of OT admits
a resolution by objects with finite Verma flag. Moreover, the center of
any category is the center of its opposed category.                  
Remark 2.8. In the case T = R Theorem 3.6 gives a simple and explicit
construction of this identification. Let λ ∈ Λ and z = {zw } ∈ ZR,Λ ,
so z acts on MR (w.λ) as multiplication with zw . Then the image of z
under the identification in the lemma will act as multiplication with zw
on MR (−w.λ − 2ρ).

       3. The Struktursatz and the combinatorics of
                    translation functors
3.1. The generic and subgeneric cases. Let T be a local defor-
mation algebra. If Λ = {λ} is generic, then PT (λ) = MT (λ) and the
evaluation ZT,Λ → End(PT (λ)) = T is an isomorphism. The functor
                V = VT,Λ := Hom(PT (λ), ·) : OT,Λ → T -mod
is an equivalence of categories.
   Suppose Λ = {λ, µ} is subgeneric and λ > µ. In Section 2.4 we
defined an element h ∈ T .
                                               ∼
Lemma 3.1.      (1) The evaluation ZT,Λ → End(PT (µ)) at the an-
      tidominant projective object is an isomorphism.
  (2) Suppose h 6= 0. Then the evaluation
             ZT,Λ → End(MT (λ)) ⊕ End(MT (µ)) = T ⊕ T
       is injective and its image is {(tλ , tµ ) | tλ ≡ tµ mod h}.
12                      THE COMBINATORICS OF O

Proof. The explicit description of End(PT (µ)) in Proposition 2.4 shows
that it is generated over T by the identity and the composition i ◦ j
with relation (i ◦ j)2 = h(i ◦ j). In particular it is commutative.
  Let f ∈ End(PT (µ)). Consider the short exact sequence

                   0 → MT (λ) → PT (µ) → MT (µ) → 0.

Then f (MT (λ)) ⊂ MT (λ) since λ > µ, hence f induces a map fλ ∈
End(MT (λ)) and a map fµ ∈ End(MT (µ)). Since any element of the
center is determined by its actions on the indecomposable projective ob-
jects PT (µ) and MT (λ), we conclude that the map ZT,Λ → End(PT (µ))
is injective. Conversely, a pair (f, g) ∈ End(PT (µ)) ⊕ End(MT (λ))
which commutes with homomorphisms defines an element of the cen-
ter. For any f ∈ End(PT (µ)) the pair (f, fλ ) is of such type, hence the
evaluation map is surjective and we proved the first statement.
   The evaluation in the second statement clearly factors over the map

          End(PT (µ)) → End(MT (λ)) ⊕ End(MT (µ)) = T ⊕ T
                   f 7→ (fλ , fµ )

that we just defined. It sends the identity to (1, 1) and i ◦ j to (h, 0).
Hence, if h 6= 0, this map is injective and its image is the set of pairs
(tλ , tµ ) such that tλ ≡ tµ modulo h.                                  

     Define the structure functor

              V = VT,Λ := Hom(PT (µ), ·) : OT,Λ → ZT,Λ -mod.

The next theorem is the subgeneric case of Soergel’s Struktursatz.
Note, however, that we do not assume that M or M ′ is projective.

Theorem 3.2. Suppose that Λ is subgeneric and that h 6= 0. Then V
is fully faithful on MT,Λ , i.e. for any M, M ′ ∈ MT,Λ the map
                                    ∼
                   HomM (M, M ′ ) → HomZ (VM, VM ′ )

is an isomorphism.

Proof. From the explicit description of the structure of OT,Λ in Propo-
sition 2.4 follows that MT (λ), MT (µ) and PT (µ) are the only inde-
composable objects in MT,Λ . We will now define their counterparts in
ZT,Λ -mod. Let M(λ) = T and M(µ) = T with the ZT,Λ –action given
by letting (zλ , zµ ) ∈ ZT,Λ act by multiplication with zλ and zµ , resp.
Let P be ZT,Λ , considered as a ZT,Λ –module. Then V(MT (λ)) ∼ = M(λ),
                        THE COMBINATORICS OF O                             13

          = M(µ) and V(PT (µ)) ∼
V(MT (µ)) ∼                    = P. Define maps
                      a : M(λ) → P,   1 7→ (h, 0)
                      b : P → M(λ), (zλ , zµ ) 7→ zλ
                      c : M(µ) → P,   1→ 7 (0, h)
                      d : P → M(µ), (zλ , zµ ) 7→ zµ .
It is easy to check that these maps generate all homomorphisms and
that a complete set of relations is given by the following: d ◦ a = 0,
b◦c = 0 and b◦a, d◦c and a◦b+c◦d are multiplication with h (note, in
particular, that there are no non–trivial homomorphism between M(λ)
and M(µ)).
   The elements (h, 0) and (0, h) in ZT,Λ acts on PT (µ) and provide maps
b : PT (µ) → MT (λ) and c′ : MT (µ) → PT (µ). Let a′ = i : MT (λ) →
 ′

PT (µ) and d′ = π : PT (µ) → MT (µ) be the injection and surjection of
the short exact sequence in Section 2.4. Using Proposition 2.4 again
one checks that these maps generate all homomorphisms and fulfill the
same relations as before.                                              
Remark 3.3. In the non–deformed situation, i.e. in the case T = C,
we unfortunately have h = 0. For finite dimensional g it was proven
in [Soe1] that the map above is still a bijection provided that M ′ is
projective.
   Let T be a local deformation algebra. Choose Λ and Λ′ as in Sec-
tion 2.5. If Λ and Λ′ are both generic or both subgeneric, then the
translation functors ϑon and ϑout are mutually inverse equivalences of
categories. Suppose now that Λ = {λ, µ} is subgeneric with λ < µ and
that Λ′ = {λ′ } is generic. The arguments applied to the case T = Rα in
[Fie] apply in fact to any subgeneric situation, i.e. all the statements
in Theorem 2.6 hold for arbitrary T provided that Λ is subgeneric.
In particular we deduce that ϑout (PT (λ′ )) ∼ = PT (λ). The correspond-
                     ′
ing map End(PT (λ )) → End(PT (λ)) can be interpreted, using Lemma
3.1, as a map ZT,Λ′ → ZT,Λ . This map is canonical, even though the
identification ϑout (PT (λ′ )) ∼
                               = PT (λ) is not. It is nothing else than the
                                                     ZT,Λ
canonical inclusion T · 1 ֒→ ZT,Λ . Let Ind = IndZT,Λ    ′
                                                           = ZT,Λ ⊗ZT,Λ′ · be
                                    T,Λ Z   ′
the induction functor and Res = ResZT,Λ its right adjoint.
Theorem 3.4. Suppose Λ is subgeneric and Λ′ is generic. Then there
are isomorphisms of functors
               V ◦ ϑon ∼
                       = Res ◦ V : MT,Λ → ZT,Λ′ -mod
and
                V ◦ ϑout ∼
                         = Ind ◦ V : MT,Λ′ → ZT,Λ -mod.
14                       THE COMBINATORICS OF O

Proof. We have
                   V ◦ ϑon M =      Hom(PT (λ′ ), ϑon M)
                             ∼
                             =      Hom(ϑout PT (λ′ ), M)
                             ∼
                             =      Hom(PT (λ), M)
                             =      Res ◦ VM
and hence proved the first statement. It provides, together with the
adjunctions id → ϑon ◦ ϑout and Ind ◦ Res → id, a morphism
     Ind ◦ V → Ind ◦ V ◦ ϑon ◦ ϑout → Ind ◦ Res ◦ V ◦ ϑout → V ◦ ϑout .
We want to prove that this is an isomorphism. It is enough to check
that it is an isomorphism when evaluated at M = MT (λ′ ) = PT (λ′ ).
In this case the map VPT (λ′ ) → Res Vϑout PT (λ′ ) is, up to an invert-
ible scalar, just the previously defined map ZT,Λ′ → ZT,Λ (of ZT,Λ′ –
modules). After applying the induction ZT,Λ ⊗ZT,Λ′ · and composing
with the multiplication ZT,Λ ⊗ZT,Λ′ ZT,Λ → ZT,Λ we get an isomorphism.
Hence Ind ◦ V ∼ = V ◦ ϑout .                                          

3.2. Splitting of equivalence classes under localizations. Now
we assume that T = R, i.e. the localization of S = S(h) at the maximal
ideal generated by h ⊂ S. Note that ∼R =∼C =∼ is the usual Kac-
Kazhdan relation, so in the following we suppress the index R. We
want to prove the statements in Theorems 3.2 and 3.4 for arbitrary
Λ ∈ h⋆ /∼ outside the critical hyperplanes and T = R. We will employ
the base change functors · ⊗R Rp for prime ideals p ⊂ R of height one
and use the coherence in Theorem 2.2 together with the facts that all
objects we will work with are free over R and that all constructions
commute with base change. Most importantly, the following lemma
shows that the localization · ⊗R Rp reduces our situation to generic and
subgeneric situations. Its proof can be found in [Fie], section 3.3.
Lemma 3.5. Let Λ ∈ h⋆ /∼ (not necessarily outside the critical hyper-
planes) and let p ⊂ R be a prime ideal.
     (1) If hα 6∈ p for all roots α ∈ ∆(Λ), then Λ splits under ∼Rp into
         trivial equivalence classes, i.e. into equivalence classes with only
         one element.
     (2) If p = Rhα for a real root α ∈ ∆(Λ), then Λ splits under ∼Rp
         into equivalence classes of the form {λ, sα .λ}.
   If Λ lies outside the critical hyperplanes, i.e. ∆(Λ) ⊂ ∆re , and p ⊂ R
is a prime ideal of height one, either (1) or (2) applies.
                       THE COMBINATORICS OF O                           15

3.3. The center of OR,Λ . Let T = R and Λ ∈ h⋆ /∼ be an equivalence
class outside the critical hyperplanes and choose λ ∈ Λ, hence Λ =
W(Λ).λ. In Section 2.6 we defined the notion of the center ZR,Λ of
OR,Λ . Let
                      Y                            Y
        ZR,Λ →                End(MR (w.λ)) =             R
                w∈W(Λ)/Stab(λ)                   w∈W(Λ)/Stab(λ)

be the evaluation at the Verma modules. Remember the element hα =
(τ, α)R ∈ R.
Theorem 3.6 ([Fie], Theorem 3.6). The evaluation map is injective
and induces an isomorphism
                                                           
                             
                                    zw ≡ zsα w mod hα
                                                            
 ZR,Λ ∼
                     Y       
      =   (zw ) ∈          R  ∀α ∈ ∆(Λ), w ∈ W(Λ)/Stab(λ) .
                             
        
                  w∈W(Λ)/Stab(λ)
                             

Remark 3.7. In [Fie] it was shown that, after identifying the    T centers
with their images under the evaluation map, we have ZR,Λ = p ZRp ,Λ ,
where the intersection is taken over all prime ideals of height one. Hence
the theorem above follows from Lemma 3.1 and Lemma 3.5 (cp. also
Remark 2.5).
  Now suppose that Λ ∈ h⋆ /∼ lies outside the critical hyperplanes
and, in addition, is regular, i.e. Stab(λ) = {e} for some (hence any)
λ ∈ Λ. We then define a Q left action of W(Λ) on ZR,Λ . For x ∈ W(Λ)
and z = (zw ) ∈ ZR,Λ ⊂       R define x.z = (zw′ ) with zw′ = zwx . For
               sα
α ∈ ∆(Λ) let ZR,Λ ⊂ ZR,Λ be the sα –invariants.

3.4. The structure functor. In this subsection T can be an arbitrary
local deformation algebra. We will define a functor VT,Λ : MT,Λ →
ZT,Λ -mod.
   Let Λ ∈ h⋆ /∼T be an equivalence class outside the critical hyper-
planes. We will call Λ of negative level if it contains an antidominant
element, i.e. an element λ with the property λ ≤ λ′ for any λ′ ∈ Λ.
We call Λ of positive level if it contains a dominant element, i.e. an
element λ with λ′ ≤ λ for any λ′ ∈ Λ. This is consistent with the
notions of positive and negative level in the case of affine Kac-Moody
algebras, i.e. Λ is of positive (resp. negative) level if all its elements
are of positive (resp. negative) level.
   Suppose now that Λ is of negative level and λ ∈ Λ is its smallest
                                                                6ν
element.
      P We will define a projective limit of the modules PT (λ).       Let
                                                                     ′
χ=      α be the sum of all simple roots of g. Hence, for all λ ∈ Λ,
16                    THE COMBINATORICS OF O

λ′ ≤ λ+nχ if n is big enough. We can choose for any n ∈ N a surjective
           6λ+(n+1)χ
morphism PT              →PT6λ+nχ (λ) and define the g ⊗C T –module
                      (λ)→

                       PT∞ (λ) := lim PT6λ+nχ (λ).
                                  ←−
Then PT∞ (λ) is an object of OT,Λ if and only if Λ is finite. This is the
case if and only if lim PT6λ+nχ (λ) stabilizes.
                    ←−
Lemma 3.8. Suppose Stab(λ) is finite. Then PT∞ (λ) has a reversed
Verma flag, i.e. a descending filtration whose subquotients are isomor-
phic to Verma modules, and for the multiplicities holds

                         PT∞ (λ) : MT (w.λ) = 1
                                           

for all w ∈ WT (Λ).

Proof. First suppose that Λ is regular, i.e. Stab(λ) = {e}. Each
PT6λ+nχ (λ) has a Verma
                      flag by Theorem 2.2. It suffices to show that
  PT6λ+nχ (λ), MT (w.λ) = 1 if n is such that λ + nχ ≥ w.λ. By BGG–
                                           
reciprocity we have PT6λ+nχ (λ), MT (w.λ) = MK (w.λ) : LK (λ) ,
                                                                     

where K is the residue field of T . In particular the left hand side
is independent of n for n ≫ 0. Denote it by mw . Standard arguments
(involving the Jantzen sum formula) show that there is, up to scalars,
a unique injection MK (sw.λ) ֒→ MK (w.λ) if s ∈ S(Λ) is simple and
sw.λ ≤ w.λ. By induction we get inclusions MK (λ) ֒→ MK (w.λ) for all
w ∈ W(Λ), hence mw ≥ 1 for all w ∈ W(Λ). From the Jantzen sum
formula we also deduce ms = 1 for s ∈ S(Λ).
   Choose s ∈ S(Λ) and let Θs = ϑout ϑon be the translation through
the s–wall. Then Θs PT6λ+nχ (λ) is projective in a suitably truncated
category and, by Theorem 2.6, the subquotient MT (λ) occurs with
multiplicity ms +me = 2, hence it must contain two copies of PT6λ+nχ (λ)
as direct summands. More generally, the subquotient MT (w.λ) occurs
with multiplicity mw + mws and we deduce mw + mws ≥ 2mw , hence
mw ≤ mws for all w ∈ W(Λ) and all simple reflections s ∈ S(Λ). By
induction on the length of w we get mw ≤ 1 for all w ∈ W(Λ), hence
mw = 1 and we proved the lemma for regular Λ.
   If Λ is not regular we can choose a regular Λ′ which contains an
antidominant λ′ with the properties needed for the definition of trans-
lation
       functors. Then, by what we proved before and Theorem 2.6,
       6λ′ +nχ ′
  ϑon PT      (λ ) : MT (w.λ) = #Stab(λ) for n big enough. Moreover,
       ′
ϑon PT6λ +nχ (λ′ ) is projective in a suitably truncated category, hence
                        THE COMBINATORICS OF O                       17
           ′
lim ϑon PT6λ +nχ (λ′ ) must contain #Stab(λ) copies of PT∞ (λ). We de-
←−
duce (PT∞ (λ) : MT (w.λ)) ≤ 1. The same arguments as in the regular
case show (PT∞ (λ) : MT (w.λ)) ≥ 1 .
                                                                    
Remarks 3.9.     (1) It follows that for any base change T → T ′ ,
      PT∞ (λ) ⊗T T ′ splits into the direct sum of antidominant pro-
      jective covers of OT ′ ,Λ and each occurs once, i.e. we have an
      isomorphism
                    PT∞ (λ) ⊗T T ′ ∼
                                     M
                                   =     PT∞′ (λi ),
                                       i
                   Ṡ
       where Λ = i Λi is the splitting of Λ with respect to ∼T ′ and
       λi ∈ Λi is the antidominant element.
   (2) Suppose T = R, Rp or one of its residue fields. Let Λ and
       Λ′ be two equivalence classes as in Section 2.5 and suppose
       both contain ′
                      antidominant elements λ ∈ Λ and λ′ ∈ Λ′ . Then
       lim ϑout PT6λ +nχ (λ′ ) has a Verma flag and every Verma module
       ←−
       in MT,Λ occurs once. Since its truncations are projective, we
       conclude that PT∞ (λ) ∼
                                                ′
                                 = lim ϑout PT6λ +nχ (λ′ ).
                                   ←−
   (3) We can also deduce that the kernel of the chosen projection
         6λ+(n+1)χ
       PT          (λ) → PT6λ+nχ (λ) is generated by all Verma subquo-
       tients with highest weight ν such that ν 6≤ λ + nχ.
   The following theorem is a consequence of the lemma and was proved
for Λ in positive level by Kashiwara-Tanisaki in [KT4]. It is not used
in the sequel. Let Λ ∈ h⋆ /∼ be outside the critical hyperplanes. Note
that the theorem refers to the non–deformed situation, i.e. to the case
T = C. There are no nontrivial homomorphisms MR (λ) → MR (µ) if
λ 6= µ.
Theorem 3.10. Let Λ ∈ h⋆ /∼ be an equivalence class outside the
critical hyperplanes and λ ∈ Λ dominant or antidominant. Let w, w ′ ∈
W(Λ) with w.λ ≤ w ′.λ. Then
                  dimC Hom(M(w.λ), M(w ′ .λ)) = 1.
Proof. Since any Verma module is free over U(n− ), where n− is the
subalgebra of g generated by all negative weight spaces, and since
U(n− ) is torsion free, every non–trivial homomorphism between Verma
modules is injective. Moreover, as shown in the proof of Lemma 3.8,
Hom(M(w.λ), M(w ′ .λ)) is at least one–dimensional for w.λ ≤ w ′ .λ.
  For antidominant λ we deduce [M(w.λ) : L(λ)] = 1 from Lemma
3.8 and BGG–reciprocity, hence dimC Hom(M(λ), M(w.λ)) = 1. We
18                          THE COMBINATORICS OF O

get dimC Hom(M(w.λ), M(λ)) = 1 for all dominant λ using the tilting
equivalence. Since all non–trivial morphisms between Verma modules
are injective, we deduce dimC Hom(M(w.λ), M(w ′ .λ)) = 1 for w, w ′ ∈
W(Λ) such that w.λ ≤ w ′ .λ. Again using the tilting equivalence gives
the statement for antidominant λ.                                   
  We return to the assumption that Λ is of negative level. Let λ ∈ Λ
be the smallest element. The action of ZT,Λ on PT6λ+nχ (λ) induces a
map ZT,Λ → End(PT∞ (λ)). Hence we can define
                   V = VT,Λ : OT,Λ → ZT,Λ -mod
                               M 7→ Hom(PT∞ (λ), M).
For convenience we will always restrict V to the subcategory MT,Λ of
modules which admit a Verma flag and denote this restriction by the
same symbol.
Proposition 3.11.                (1) There is an isomorphism of functors
         V|M6λ+nχ ∼      6λ+nχ
                  = Hom(PT     (λ), ·) : M6λ+nχ
                                          T,Λ   → ZT,Λ -mod.
             T,Λ


         In particular, V transforms short exact sequences to short exact
         sequences.
     (2) For any w ∈ WT (Λ) there is an isomorphism VMT (w.λ) ∼         =
         ZT,Λ /mw , where mw ⊂ ZT,Λ is the ideal generated by all elements
         acting trivially on MT (w.λ). In particular, VMT (λ) is free of
         rank one over T .
     (3) If M ∈ MT,Λ , then VM is free of finite rank over T .
     (4) V commutes with base changes T → T ′ , i.e. there are natural
         isomorphisms of functors
                    VT,Λ (·) ⊗T T ′ ∼
                                      Y
                                    =   VT ′ ,Λi (· ⊗T T ′ ),
                                             i
                     Ṡ
         where Λ =        i Λi   is the splitting of Λ under ∼T ′ .
Proof. The first statement directly follows Remark 3.9, (3).
   Let K be the residue field of T . By Theorem 2.2, (3) and Lemma 3.8
we have dimK (VMT (w.λ)) ⊗T K = dimK Hom(PK∞ (λ), MK (w.λ)) = 1.
Hence, by Nakayama’s lemma, there is a generator f of VMT (w.λ) as
a T –module. Then f is killed by the action of mw ⊂ ZT,Λ , hence the
action of ZT,Λ on f provides an isomorphism VMT (w.λ) ∼    = ZT,Λ /mw =
T , hence we proved the second statement.
   The third statement follows immediately from the fact that V trans-
forms short exact sequences to short exact sequences and (2).
                       THE COMBINATORICS OF O                            19

  By Remark 3.9, (1), the localization PT6λ+nχ (λ) ⊗T T ′ splits into
the direct sum of all antidominant projective covers in OT6λ+nχ
                                                           ′ ,Λ . By
Theorem 2.2, (3), the natural map defines an isomorphism of functors
     Hom(PT6λ+nχ (λ), ·) ⊗T T ′ = Hom(PT6λ+nχ (λ) ⊗T T ′ , · ⊗T T ′ ).
Using (1) we get the stated equivalence of functors when evaluated on
the subcategory M6λ+nχ
                    T,Λ    for any n. Now any module that admits a
Verma flag lies in one of those categories, hence we proved the fourth
claim.                                                              
  For later use we state the following
Lemma 3.12. Suppose T = R. The action ZR,Λ → End(PR∞ (λ)) is an
isomorphism.
Proof. We have                  \
                       ZR,Λ =       ZRp ,Λ ⊂ ZR(0) ,Λ ,
where the intersection is taken over all prime ideals of height one. Since
PR∞ (λ) is free over R, we analogously have
                     \
    End(PR∞ (λ)) =      End(PR∞ (λ) ⊗R Rp) ⊂ End(PR∞ (λ) ⊗R R(0) ).
By Remark 3.9, (1) the localizations of PR∞ (λ) split into the direct
sum of the resp. antidominant projectives. Moreover the evaluation
maps Z → End(P ) are compatible with localizations. Since, after
localization, we deal with generic or subgeneric situations, the lemma
follows from Lemma 3.1.                                              
  Now we want to extend the definition of V to the positive level. Let
Λ ∈ h⋆ /∼T be an equivalence class outside the critical hyperplanes
and of positive level and let λ ∈ Λ be the dominant element. We use
                                 ∼
the tilting equivalence t : MT,Λ → Mopp
                                      T,t(Λ) . Note that −2ρ − λ is an
antidominant weight in t(Λ), hence we can define
       Ṽ := VT,t(Λ) ◦ t : MT,Λ → (ZT,t(Λ) -mod)opp
                            M 7→ HomO (PT∞ (−λ − 2ρ), t(M)).
By Lemma 2.7 the tilting equivalence induces an isomorphism ZT,t(Λ) ∼=
                                                                   opp
ZT,Λ , so we can consider Ṽ as a functor from MT,Λ to (ZT,Λ -mod) .
Moreover, by Proposition 3.11, (3), its image is contained in the sub-
category of ZT,Λ –modules which are free of finite rank over T . Hence
composition with the duality ⋆ = HomT (·, T ) provides a functor
 V = VT,Λ := ⋆ ◦ VT,t(Λ) ◦ t : MT,Λ → ZT,Λ -mod
                                M 7→ Hom(PT∞ (−2ρ − λ), t(M))⋆
20                     THE COMBINATORICS OF O

which transforms short exact sequences to short exact sequences, and
the statements (2)–(4) of Proposition 3.11 carry over.

Remark 3.13. If the equivalence class Λ happens to have both a domi-
nant and an antidominant weight, then the two definitions of V agree
up to a non–unique isomorphism which can be defined as follows.
  Let M ∈ MT,Λ and let λ and λ′ be the antidominant weights of Λ and
t(Λ). Let V1 M = Hom(PT (λ), M) and V2 M = Hom(PT (λ′ ), t(M))⋆ .
Note that S2ρ ⊗U PT (λ′ ) is the dual of a non–split module with a finite
Verma flag where every Verma module occurs with multiplicity one.
Hence it is the dual of the antidominant projective, which is selfdual.
Hence S ⊗U PT (λ′ ) is the antidominant projective. Choose generators
v ∈ PT (λ) and v ′ ∈ S ⊗U PT (λ′ ). We get maps

     V1 M × (V2 M)⋆ ∼
                    = Hom(PT (λ), M) × Hom(M, t(PT (λ′ )))
                    → Hom(PT (λ), t(PT (λ′ )))
                    = Hom(PT (λ), (S ⊗U PT (λ′ ))⊛)
                    → T,

where the last map is evalution of the image of v on v ′ . This defines
a non–degenerate pairing which is functorial in M and hence provides
an isomorphism V1 ∼
                  = V2 .

3.5. The case of general (non–critical) Λ. We return to the as-
sumption that T = R. Let Λ, Λ′ ∈ h⋆ /∼ as in Section 2.5 and let ϑon
and ϑout be the translation functors. Suppose Λ (and hence also Λ′ ) is
of negative level and let λ ∈ Λ and λ′ ∈ Λ′ be the smallest elements.
The isomorphism PR∞ (λ) ∼
                                            ′
                              = lim ϑ P 6λ +nχ (λ′ ) of Remark 3.9, (2), in-
                                ←− out R
duces, via Lemma 3.12, a map ZR,Λ′ → ZR,Λ which is canonical. It can
be described as follows. An element z = (zw ) ∈ ZR,Λ′ will act as multi-
plication with zw on MR (w.λ′) for each w ∈ W(Λ)/Stab(λ′ ). Its image
will act as multiplication with zw on MR (wx.λ) for each x ∈ Stab(λ′ ).
We deduce that ZR,Λ′ → ZR,Λ is injective, and in the case of regular
                  Stab(λ′ )
Λ the image is ZR,Λ , i.e. the Stab(λ′ )–invariant elements under the
operation of W(Λ) defined in Section 3.3. Using Lemma 2.7 we also
get a map ZR,Λ′ → ZR,Λ in the case that Λ and Λ′ are of positive
                      ZR,Λ
level. Let Ind = IndZR,Λ    ′
                              = ZR,Λ ⊗ZR,Λ′ · be the induction functor and
           Z
           R,Λ ′
Res = ResZR,Λ  its right adjoint.
  The following theorem generalizes the subgeneric situation in Theo-
rem 3.4.
                       THE COMBINATORICS OF O                            21

Theorem 3.14. Suppose T = R and choose Λ and Λ′ as in Section
2.5. There are isomorphisms of functors
                V ◦ ϑon ∼
                        = Res ◦ V : MR,Λ → ZR,Λ′ -mod
and
                V ◦ ϑout ∼
                         = Ind ◦ V : MR,Λ′ → ZR,Λ -mod.
Proof. We will prove the second statement, the proof of the first one is
similar. In the following all objects will be free over R and hence they
are the intersections of their localizations at prime ideals of height one.
Moreover, V and the translation functors commute with base change
by Theorem 2.6 and Proposition 3.11. For any R–module N and any
prime p ⊂ R let Np be the localization of N at p. Let M ∈ MR,Λ′ . We
then have
                                      \
                     V ◦ ϑon M =         (V ◦ ϑon M)p
                                      \
                                  =      Vp ◦ ϑp,on Mp.


Note that for any R–linear functor F we write Fp for its version on the
localized category. The isomorphisms in Theorem 3.4 are compatible
with base change and with taking the intersection, hence we get
      \                  \               \
         Vp ◦ ϑp,on Mp =   Indp ◦ VpMp =    ZRp ,Λ ⊗ZRp ,Λ′ VpMp.
Since M has a finite Verma flag, the action of ZRp ,Λ on ZRp ,Λ ⊗ZRp ,Λ′
VpMp factors over a map ZRp ,Λ → ZRI p ,Λ , where I ⊂ W(Λ)/Stab(λ) is
a finite subset and ZRI p ,Λ is the image of ZRp ,Λ ⊂ w∈W(Λ)/Stab(λ) Rp
                                                         Q
                       Q                        Q
under the projection w∈W(Λ)/Stab(λ) Rp → w∈I Rp. For finite I we
        I
have ZR,Λ  ⊗R Rp ∼ = ZRI p ,Λ . Hence
           \                            \
              ZRp ,Λ ⊗ZRp ,Λ′ VpMp =       ZRI p ,Λ ⊗Z I ′ VpMp
                                                      Rp ,Λ
                                        \
                                              I
                                      =    (ZR,Λ   ⊗Z I ′ VM)p
                                                      R,Λ
                                        \
                                      =    (ZR,Λ ⊗ZR,Λ′ VM)p
                                    = Ind ◦ VM,
as was to be shown.                                                      
  The next theorem is the analog of Soergel’s Struktursatz. Again we
do not assume that M or M ′ is projective, hence it does not hold in
this generality for T = C.
22                     THE COMBINATORICS OF O

Theorem 3.15. Let T = R and let Λ ∈ h⋆ /∼ be an equivalence class
outside the critical hyperplanes. Then V = VR,Λ : MR,Λ → ZR,Λ -mod
is fully faithful, i.e.
                                   ∼
                   Hom(M, M ′ ) → Hom(VM, VM ′ )
is an isomorphism for any M, M ′ ∈ MR,Λ .
Proof. In the following all intersections T
                                          are taken over the set of prime
ideals p ⊂ R of height one. Since M = Mp ⊂ M(0) we have
                      \
 Homg⊗C R (M, M ′ ) =    Homg⊗C Rp (Mp, Mp′ ) ⊂ Homg⊗C R(0) (M(0) , M(0)
                                                                     ′
                                                                         ).
Analogously, by Proposition 3.11, VN is free over R for any N ∈ MR,Λ .
Since N has a finite Verma flag, the module (VN)p carries a natural
ZRp ,Λ –action. Hence
                                \
        HomZR,Λ (VM, VM ′ ) =      HomZRp ,Λ ((VM)p, (VM ′ )p)
                              ⊂ HomZR(0) ,Λ ((VM)(0) , (VM ′ )(0) ).
All maps are compatible with localizations. Since the localized situa-
tions deal with generic and subgeneric cases we can deduce the theorem
from Theorem 3.2.                                                    

              4. The combinatorics of category O
   Let Λ ∈ h⋆ /∼ be an equivalence class outside the critical hyper-
planes. We want to give a description of the categorical structure of
OΛ . Suppose Λ is in positive level, i.e. Λ contains a dominant weight
λ. For any w ∈ W(Λ) there is a projective cover P (w.λ) of L(w.λ)
in OΛ and PΛ := {P (w.λ)}w∈W(Λ) is a faithful set of small projectives
in the sense of [Mit]. We view PΛ as a full subcategory of OΛ . Let
        opp
C-modPΛ be the category of additive functors PΛopp → C-mod. Then
by a theorem of Freyd (cp.[Mit], Theorem 3.1)
                                             opp
                          OΛ → C-modPΛ
                          M 7→ Hom(·, M)
is an equivalence of C–categories. Hence, in order to describe the cate-
gory OΛ , it is sufficient to describe PΛ . This amounts to a description
of Hom(P (w.λ), P (w ′.λ)) for any pair w, w ′ ∈ W(Λ) together with the
composition data. Now P (w.λ) ∼     = PR (w.λ) ⊗R C and by Theorem 2.2
we have to describe Hom(PR (w.λ), PR (w ′.λ)) and the composition data.
By Theorem 3.15 we have to describe the ZT,Λ –modules VPR (w.λ).
   Suppose Λ is regular and of positive level. Let λ ∈ Λ be the dominant
element. Then PR (λ) ∼   = MR (λ) and VPR (λ) ∼   = ZR,Λ /me , where me is
                        THE COMBINATORICS OF O                              23

the annihilator of MR (λ). Let w ∈ W(Λ) and choose a reduced expres-
sion w = s1 · · · sn in the Coxeter system (W(Λ), S(Λ)). We construct
VPR (w.λ) inductively on the length of w. Let Θs be the translation
functor corresponding to a reflection s ∈ S(Λ). By Theorem 2.6 the
module Θsn · · · Θs1 MR (λ) is projective and the Verma module MR (w.λ)
occurs with multiplicity one in a Verma flag since the expression for w
was reduced. Hence PR (w.λ) is the unique direct summand that is not
isomorphic to PR (w ′ .λ) for any w ′ of smaller length. Then VPR (w.λ) is
the unique direct summand of ZR,Λ ⊗ZR,Λ    sn Z             s1 Z
                                                R,Λ · · · ⊗ZR,Λ  R,Λ /me which
                                 ′              ′
is not isomorphic to VPR (w .λ) for any w of smaller length than w.
Hence we get an inductive description of VPR (w.λ) inside the category
of ZR,Λ –modules.
    If Λ is of positive level and not regular, but Stab(λ) is finite, we can
find a regular Λ′ together with the translation on the wall ϑon : MR,Λ′ →
MR,Λ . There is an induced map ZR,Λ′ → ZR,Λ which identifies ZR,Λ′
with the Stab(λ)–invariant elements in ZR,Λ . Let w ∈ W(Λ) and let
w̄ ∈ W(Λ)/Stab(λ) be image. Then ϑon PR (w.λ′ ) splits into #Stab(λ)
copies of PR (w̄.λ) and, possibly, additional terms PR (w̄ ′ .λ) with w̄ ′ .λ >
w̄.λ. Analogously, Vϑon P (w.λ′) = ResVP (w.λ′) splits into #Stab(λ)
copies of VP (w̄.λ) and, possibly, additional terms VPR (w̄ ′ .λ) with
w̄ ′.λ > w̄.λ. Again we get an inductive description of VPR (w̄.λ) for
any w̄ ∈ W(Λ)/Stab(λ). So we arrive at a description of PΛ , hence of
OΛ , in the case that Λ is of positive level.
Theorem 4.1. Let h ⊂ b ⊂ g and h′ ⊂ b′ ⊂ g′ be two symmetriz-
able Kac-Moody algebras together with Cartan and Borel subalgebras.
Choose two equivalence classes Λ ∈ h⋆ /∼ and Λ′ ∈ (h′ )⋆ /∼′ outside the
critical hyperplanes and let OΛ and OΛ′ ′ be the corresponding blocks.
Suppose the following.
    (1) There exist λ ∈ Λ and λ′ ∈ Λ′ which are either both dominant
        or both antidominant.
    (2) There is an isomorphism (W(Λ), S(Λ)) ∼   = (W ′ (Λ′ ), S ′ (Λ′ )) of
        the corresponding Coxeter systems.
    (3) This isomorphism induces a bijection Stab(λ) ∼   = Stab(λ′ ) an
        both sets are finite.
Then there is an equivalence of categories
                              OΛ ∼= O′ ′ .Λ

Proof. The description of PΛ above proves the theorem in the case of
Λ and Λ′ in positive level. If Λ and Λ′ are in negative level, then t(Λ)
and t(Λ′ ) are in positive level. Since Verma modules have a categor-
ical characterization as projective covers in truncated categories, any
24                      THE COMBINATORICS OF O

equivalence Ot(Λ) ∼    ′
                   = Ot(Λ                                     ∼ ′
                          ′ ) induces an equivalence Mt(Λ) = Mt(Λ′ ) . Us-

ing the tilting functor we get an equivalence MΛ ∼       = M′Λ′ . It induces
                    6w.λ ∼
                         = (M′Λ′ )6w.λ for any w ∈ W(Λ) ∼
                                         ′
an equivalence MΛ                                                 = W ′ (Λ′ ).
This equivalence must map the indecomposable projective objects in
OΛ6w.λ to the indecomposable projective objects of (OΛ′ ′ )6w.λ , hence it
                                                                  ′


induces an equivalence OΛ6w.λ ∼
                                                ′
                                  = (OΛ′ ′ )6w.λ . Since a g-module is in O
if and only if any finitely generated submodule is in some truncated
subcategory, we get an equivalence OΛ ∼      = OΛ′ ′ .                     

                           5. An application
   Let Λ ∈ h⋆∼ be a regular equivalence class outside the critical hyper-
planes and suppose that the Coxeter system (W(Λ), S(Λ)) is of finite
or affine type. According to Theorem 4.1 the block OΛ is equivalent
to a regular integral block OΛ′ ′ of the finite of affine Kac-Moody al-
gebra g′ for the Coxeter system (W ′ , S ′ ) ∼
                                             = (W(Λ), S(Λ)) (note that
regular integral equivalence classes exist in those cases). Let λ ∈ Λ
and λ′ ∈ Λ′ be both dominant or both antidominant. Under the above
equivalence the class of the Verma module M(w.λ) must map to the
class of M(w.λ′ ) and the class of the simple module L(w.λ) must map
to the class of L(w.λ′ ). Hence [M(x.λ) : L(y.λ)] = [M(x.λ′ ) : L(y.λ′)].
So we reduced the following statement to the integral case, where it
was proved by Beilinson-Bernstein [BB] and Brylinski-Kashiwara [BK]
in the finite situation and by Kashiwara [Kas] and Kashiwara-Tanisaki
[KT1] in the dominant affine and Kashiwara-Tanisaki [KT2] in the an-
tidominant affine case.
Theorem 5.1. Let g be a symmetrizable Kac-Moody algebra and Λ ∈
h⋆ /∼ an equivalence class outside the critical hyperplanes and let λ ∈ Λ
be dominant or antidominant. Suppose that (W(Λ), S(Λ)) is of finite
or affine type and that Λ is regular, i.e. Stab(λ) = {e}. Then the
Kazhdan-Lusztig conjecture holds, i.e.
                          X
            ch L(w.λ) =      (−1)l(y)−l(w) Qw,y (1) ch M(y.λ)
                           y≥w

if λ is dominant and, if λ is antidominant,
                         X
            ch L(w.λ) =      (−1)l(w)−l(y) Py,w (1) ch M(y.λ),
                           y≤w

where Py,w and Qw,y ∈ Z[v, v −1 ] are the Kazhdan-Lusztig polynomial
and the inverse Kazhdan-Lusztig polynomial for the Coxeter system
(W(Λ), S(Λ)).
                         THE COMBINATORICS OF O                                   25

   In fact, Kashiwara [Kas] and Kashiwara-Tanisaki [KT1] proved the
conjecture for any symmetrizable Kac-Moody algebra in the integral
dominant case. Then Kashiwara-Tanisaki proved it subsequently for
the integral antidominant case and affine algebras [KT2], for the ratio-
nal antidominant case and affine algebras [KT3], in the rational dom-
inant case and arbitrary symmetrizable Kac-Moody algebras [KT4],
and for the arbitrary (non–critical) dominant or antidominant case and
affine algebras [KT5].
                                 References
[BB]     Alexander A. Beilinson, Joseph N. Bernstein, Localisation de g–modules,
         C. R. Acad. Sci. Paris, Sér. 1 292 (1981), 15–18.
[BK]     Jean-Luc Brylinski, Masaki Kashiwara, Kazhdan-Lusztig conjecture and
         holonomic systems, Invent. Math. 64 (1981), 387–410.
[Fie]    Peter Fiebig, Centers and translation functors for category O over Kac-
         Moody algebras, Math. Z. 243 (2003), No.4, 689–717.
[Kac]    Victor G. Kac, Infinite dimensional Lie algebras, 3rd ed., Cambridge Uni-
         versity Press, 1990.
[Kas]    Masaki Kashiwara, Kazhdan-Lusztig conjecture for a symmetrizable Kac-
         Moody Lie algebra, in The Grothendieck Festschrift, Vol. II , Progr. Math.
         87, Birkhäuser, Boston (1990), 407–433.
[KT1]    Masaki Kashiwara, Toshiyuki Tanisaki, Kazhdan-Lusztig conjecture for
         a symmetrizable Kac-Moody Lie algebra II, in Operator algebras, unitary
         representations, enveloping algebras, and invariant theory, Vol. II , Progr.
         Math. 92, Birkhäuser, Boston (1990), 159–195.
[KT2]    Masaki Kashiwara, Toshiyuki Tanisaki, Kazhdan-Lusztig conjecture for
         affine Lie algebras with negative level, Duke Math. J. 77 (1995), 21–62.
[KT3]    Masaki Kashiwara, Toshiyuki Tanisaki, Kazhdan-Lusztig conjecture for
         affine Lie algebras with negative level II: non–integral case, Duke Math.
         J. 84 (1996), 771–813.
[KT4]    Masaki Kashiwara, Toshiyuki Tanisaki, Kazhdan-Lusztig conjectures for
         symmetrizable Kac-Moody Lie algebras III (positive rational case), Asian
         J. Math. 2 (1998), No.4, 779–832.
[KT5]    Masaki Kashiwara, Toshiyuki Tanisaki, Characters for irreducible mod-
         ules with non–critical highest weights over affine Lie algebras, in: Wang,
         Jianpan (ed.) et al., Representations and quantizations. Proceedings of
         the international conference on representation theory, Shanghai, China,
         June 29–July 3, 1998. Beijing: China Higher Education Press (CHEP),
         275–296 (2000).
[Mit]    Barry Mitchell, Rings with several objects, Adv. Math. 8 (1972), 1–161.
[Soe1]   Wolfgang Soergel, Kategorie O, perverse Garben, und Moduln über den
         Koinvarianten zur Weylgruppe, J. Am. Math. Soc. 3 (1990), No.2, 421–
         445 .
[Soe2]   Wolfgang Soergel, Character formulas for tilting modules over Kac-Moody
         algebras, Represent. Theory 2 (1998), No.13, 432–448.
